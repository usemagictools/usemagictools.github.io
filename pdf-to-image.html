<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CT8E5N460D"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-CT8E5N460D');</script>
    <title>PDF to JPG/PNG - Free Online | No Ads, No Signup | PDF è½¬å›¾ç‰‡ | Web Toolbox</title>
    <meta name="description" content="Free online PDF to image converter. Convert PDF pages to JPG or PNG with custom quality and scale. Export all pages or selected ranges directly in your browser. âœ… No ads âœ… No signup âœ… No upload â€” files never leave your browser.">
    <meta name="keywords" content="PDF to image,PDF to JPG,PDF to PNG,convert PDF pages,PDF è½¬å›¾ç‰‡,PDFè½¬JPG,PDFè½¬PNG, no ads, no signup, no upload, no login, free unlimited, browser-based, local processing, privacy, secure">
    <meta name="author" content="UseMagicTools">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <meta name="bingbot" content="index, follow">
    <meta name="revisit-after" content="7 days">
    <meta name="rating" content="general">
    <meta name="distribution" content="global">
    <meta name="language" content="en">
    <link rel="canonical" href="https://www.usemagictools.com/pdf-to-image.html">
    <link rel="alternate" hreflang="en" href="https://www.usemagictools.com/pdf-to-image.html">
    <link rel="alternate" hreflang="zh-CN" href="https://www.usemagictools.com/pdf-to-image.html">
    <link rel="alternate" hreflang="fr" href="https://www.usemagictools.com/pdf-to-image.html">
    <link rel="alternate" hreflang="es" href="https://www.usemagictools.com/pdf-to-image.html">
    <link rel="alternate" hreflang="x-default" href="https://www.usemagictools.com/pdf-to-image.html">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.usemagictools.com/pdf-to-image.html">
    <meta property="og:title" content="PDF to JPG/PNG - Free Online | No Ads, No Signup | PDF è½¬å›¾ç‰‡">
    <meta property="og:description" content="Convert PDF pages to PNG/JPG online with custom quality and scale settings.">
    <meta property="og:image" content="https://www.usemagictools.com/screenshots/pdf-to-image-v1.webp">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="en_US">
    <meta property="og:locale:alternate" content="zh_CN">
    <meta property="og:site_name" content="Web Toolbox">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@usemagictools">
    <meta name="twitter:creator" content="@usemagictools">
    <meta name="twitter:title" content="PDF to JPG/PNG - Free Online | No Ads, No Signup | PDF è½¬å›¾ç‰‡">
    <meta name="twitter:description" content="Export PDF pages as JPG/PNG images online for free.">
    <meta name="twitter:image" content="https://www.usemagictools.com/screenshots/pdf-to-image-v1.webp">

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "PDF to Image Converter",
        "alternateName": ["PDF è½¬å›¾ç‰‡", "PDF to JPG", "PDF to PNG"],
        "url": "https://www.usemagictools.com/pdf-to-image.html",
        "description": "Free online PDF to image converter. Convert PDF pages to JPG or PNG in browser with custom quality and range.",
        "inLanguage": ["en", "zh-CN", "fr", "es"],
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Web Browser",
        "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
        "author": { "@type": "Person", "name": "UseMagicTools" },
        "publisher": { "@type": "Organization", "name": "Web Toolbox", "url": "https://www.usemagictools.com/" },
        "featureList": [
            "Convert PDF to PNG and JPG",
            "Batch export all PDF pages",
            "Select custom page ranges",
            "Local browser processing for privacy",
            "No ads",
            "No signup required",
            "No file upload",
            "100% browser-based",
            "Unlimited usage",
            "Privacy-first"
        ],
        "screenshot": "https://www.usemagictools.com/screenshots/pdf-to-image-v1.webp"
    }
    </script>
    <script type="application/ld+json">
    {
    "@context": "https://schema.org",
    "@type": "BreadcrumbList",
    "itemListElement": [
        {
            "@type": "ListItem",
            "position": 1,
            "name": "Home",
            "item": "https://www.usemagictools.com/"
        },
        {
            "@type": "ListItem",
            "position": 2,
            "name": "PDF to Image Converter",
            "item": "https://www.usemagictools.com/pdf-to-image.html"
        }
    ]
}
    </script>
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "HowTo",
        "name": "How to Convert PDF to Image",
        "totalTime": "PT1M",
        "step": [
            { "@type": "HowToStep", "position": 1, "name": "Upload PDF", "text": "Choose a PDF file from your device." },
            { "@type": "HowToStep", "position": 2, "name": "Set output options", "text": "Choose PNG/JPG, quality, scale, and page ranges." },
            { "@type": "HowToStep", "position": 3, "name": "Convert and download", "text": "Export selected pages as images and download instantly." }
        ]
    }
    </script>
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
        {
            "@type": "Question",
            "name": "Can I convert PDF to JPG and PNG?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes. You can choose between JPG and PNG output formats before starting the conversion. JPG produces smaller files ideal for sharing and web use, while PNG offers lossless quality with transparency support for professional editing. Both formats preserve the visual fidelity of your PDF pages. This free tool runs in your browser with no signup or ads."
            }
        },
        {
            "@type": "Question",
            "name": "Can I export only selected pages?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes. Enter custom page ranges like 1-3, 5, 8 in the page selection field to export only the specific pages you need. This saves time when you only need certain pages from a large PDF document. Unselected pages are simply skipped during conversion. The tool is completely free, browser-based, and requires no signup or server upload."
            }
        },
        {
            "@type": "Question",
            "name": "Will my PDF file be uploaded?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "No. The entire PDF-to-image conversion process runs 100% locally in your browser using pdf.js for rendering and Canvas API for image generation. Your PDF files are never uploaded to any external server or cloud service. This ensures complete privacy and security for sensitive documents. Free to use with no signup, no ads, and no watermarks."
            }
        },
        {
            "@type": "Question",
            "name": "How do I download multiple pages?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "When converting multiple pages, all generated images are automatically packaged into a single ZIP file for convenient one-click download. Each image is named sequentially (page-1.jpg, page-2.jpg, etc.) for easy organization. You can also download individual page images separately if needed. This free browser-based tool requires no signup and processes everything locally."
            }
        },
        {
            "@type": "Question",
            "name": "Is this PDF to image tool free?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes, this PDF-to-image converter is 100% free with no signup, no ads, no watermarks, and no usage limits. You can convert unlimited PDF pages to high-quality JPG or PNG images without any account creation or subscription. The tool runs entirely in your browser, ensuring complete document privacy. There are no hidden fees or premium features."
            }
        },
        {
            "@type": "Question",
            "name": "Is this tool really free? Are my files safe?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes, 100% free with no ads, no registration, and no usage limits. Unlike other PDF tools, your files are never uploaded to any server â€” all processing happens locally in your browser for maximum privacy."
            }
        }
    ]
}
</script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>

    <style>
        *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            color: #e4e4e7;
            min-height: 100vh;
            padding: 0;
            line-height: 1.6;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 40px; }
        h1 { text-align: center; font-size: 2rem; margin-bottom: 8px; background: linear-gradient(120deg, #00d4ff, #7c3aed, #f472b6); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .subtitle { text-align: center; color: #a1a1aa; margin-bottom: 26px; }

        /* Workflow Cards */
        .workflow-card {
            background: rgba(0,0,0,0.28);
            border: 1px solid rgba(255,255,255,0.1);
            border-radius: 20px;
            padding: 28px;
            margin-bottom: 20px;
        }
        .step-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 20px;
        }
        .step-number {
            width: 30px; height: 30px;
            background: linear-gradient(135deg, #7c3aed, #6366f1);
            border-radius: 50%;
            display: flex; align-items: center; justify-content: center;
            font-size: 0.85rem; font-weight: 700; color: #fff; flex-shrink: 0;
        }
        .step-title { font-size: 1.05rem; font-weight: 600; color: #f4f4f5; }

        /* Upload Zone */
        .upload-zone {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            width: 100%;
            border: 2px dashed rgba(124,58,237,0.4);
            border-radius: 16px;
            background: rgba(124,58,237,0.05);
            text-align: center;
            padding: 44px 24px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .upload-zone:hover, .upload-zone.dragover {
            border-color: #a78bfa;
            background: rgba(124,58,237,0.12);
            transform: translateY(-2px);
            box-shadow: 0 8px 24px rgba(124,58,237,0.12);
        }
        .upload-icon { font-size: 3.2rem; margin-bottom: 14px; }
        .upload-title { font-size: 1.05rem; font-weight: 600; color: #e4e4e7; margin-bottom: 6px; }
        .upload-hint { color: #71717a; font-size: 0.85rem; }
        .hidden-input { display: none; }

        /* File Info */
        .file-info {
            display: none;
            margin-top: 16px;
            padding: 14px 16px;
            background: rgba(124,58,237,0.08);
            border: 1px solid rgba(124,58,237,0.2);
            border-radius: 12px;
        }
        .file-info.show { display: flex; align-items: center; gap: 12px; }
        .file-info-icon {
            width: 40px; height: 40px;
            background: linear-gradient(135deg, #7c3aed, #6366f1);
            border-radius: 10px;
            display: flex; align-items: center; justify-content: center;
            font-size: 1.2rem; flex-shrink: 0;
        }
        .file-info-text { flex: 1; min-width: 0; }
        .file-name { font-size: 0.9rem; font-weight: 500; color: #e4e4e7; word-break: break-all; }
        .file-meta { color: #a1a1aa; font-size: 0.8rem; margin-top: 2px; }

        /* Settings Controls */
        .settings-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
        }
        .setting-item { display: flex; flex-direction: column; gap: 8px; }
        .setting-item.full-width { grid-column: 1 / -1; }
        .setting-label {
            font-size: 0.85rem;
            color: #a1a1aa;
            display: flex; align-items: center; gap: 6px;
        }
        .setting-label strong { color: #e4e4e7; }
        .setting-select, .setting-input {
            width: 100%;
            padding: 10px 12px;
            border-radius: 10px;
            border: 1px solid rgba(255,255,255,0.15);
            background: rgba(255,255,255,0.06);
            color: #e4e4e7;
            font-size: 0.9rem;
            outline: none;
            transition: border-color 0.2s;
        }
        .setting-select:focus, .setting-input:focus { border-color: rgba(124,58,237,0.6); }
        .setting-select option { background: #1a1a2e; }
        .setting-range {
            width: 100%;
            -webkit-appearance: none;
            height: 6px;
            border-radius: 3px;
            background: rgba(255,255,255,0.12);
            outline: none;
        }
        .setting-range::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px; height: 18px;
            border-radius: 50%;
            background: linear-gradient(135deg, #7c3aed, #6366f1);
            cursor: pointer;
            box-shadow: 0 2px 6px rgba(124,58,237,0.3);
        }
        .setting-hint { color: #71717a; font-size: 0.78rem; margin-top: 2px; }

        /* Action Area */
        .action-area { display: flex; gap: 12px; align-items: stretch; }
        .convert-btn {
            flex: 1;
            padding: 14px 24px;
            background: linear-gradient(135deg, #7c3aed, #6366f1);
            color: #fff; border: none; border-radius: 12px;
            font-size: 1rem; font-weight: 600;
            cursor: pointer; transition: all 0.25s ease;
            display: flex; align-items: center; justify-content: center; gap: 8px;
        }
        .convert-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #8b5cf6, #818cf8);
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(124,58,237,0.25);
        }
        .convert-btn:disabled { opacity: 0.5; cursor: not-allowed; }
        .reset-btn {
            padding: 14px 18px;
            background: rgba(255,255,255,0.06);
            border: 1px solid rgba(255,255,255,0.12);
            border-radius: 12px;
            color: #a1a1aa; font-size: 0.9rem;
            cursor: pointer; transition: all 0.2s;
        }
        .reset-btn:hover { background: rgba(255,255,255,0.1); color: #e4e4e7; }

        /* Status */
        .status { color: #93c5fd; font-size: 0.9rem; min-height: 20px; margin-top: 14px; padding: 0 4px; }

        .preview-wrap { margin-top: 16px; text-align: center; }
        .preview-img {
            max-width: 260px; border-radius: 12px;
            border: 1px solid rgba(255,255,255,0.12);
            display: none;
            box-shadow: 0 4px 16px rgba(0,0,0,0.2);
        }
        .preview-img.show { display: inline-block; }

        /* Features Section */
        .features-section { margin: 32px 0; }
        .features-section h2 { font-size: 1.15rem; margin-bottom: 18px; color: #f4f4f5; }
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 14px;
        }
        .feature-card {
            background: rgba(255,255,255,0.04);
            border: 1px solid rgba(255,255,255,0.08);
            border-radius: 14px;
            padding: 22px;
            text-align: center;
            transition: all 0.3s;
        }
        .feature-card:hover {
            background: rgba(124,58,237,0.08);
            border-color: rgba(124,58,237,0.2);
            transform: translateY(-3px);
        }
        .feature-card div:first-child { font-size: 2rem; margin-bottom: 10px; }
        .feature-card h4 { font-size: 0.95rem; font-weight: 600; color: #e4e4e7; margin-bottom: 6px; }
        .feature-card p { color: #a1a1aa; font-size: 0.85rem; line-height: 1.5; }
        .faq-item { border: 1px solid rgba(255,255,255,0.1); border-radius: 10px; margin-bottom: 10px; overflow: hidden; background: rgba(255,255,255,0.03); }
        .faq-question { width: 100%; text-align: left; border: 0; background: transparent; color: #f4f4f5; font-size: 14px; padding: 12px 14px; cursor: pointer; }
        .faq-answer { display: none; padding: 0 14px 12px; color: #a1a1aa; font-size: 14px; }
        .faq-item.active .faq-answer { display: block; }

        @media (max-width: 640px) {
            h1 { font-size: 1.7rem; }
            .settings-grid { grid-template-columns: 1fr; }
            .workflow-card { padding: 20px; }
        }
        </style>
    <link rel="stylesheet" href="common/common.css">
</head>
<body>
<div class="container">
<h1 data-i18n="title">PDF to Image Converter</h1>
        <p class="subtitle" data-i18n="subtitle">Convert PDF pages to PNG or JPG images in your browser</p>

        <!-- Step 1: Upload -->
        <section class="workflow-card">
            <div class="step-header">
                <div class="step-number">1</div>
                <div class="step-title" data-i18n="uploadTitle">Upload PDF File</div>
            </div>
            <label class="upload-zone" id="uploadZone">
                <input class="hidden-input" id="fileInput" type="file" accept="application/pdf,.pdf">
                <div class="upload-icon">ğŸ“„</div>
                <div class="upload-title" data-i18n="uploadMain">Click to select a PDF file</div>
                <div class="upload-hint" data-i18n="uploadHint">or drag and drop one PDF here</div>
            </label>
            <div class="file-info" id="fileInfo">
                <div class="file-info-icon">ğŸ“„</div>
                <div class="file-info-text">
                    <div class="file-name" id="fileName"></div>
                    <div class="file-meta" id="fileMeta"></div>
                </div>
            </div>
        </section>

        <!-- Step 2: Export Options -->
        <section class="workflow-card">
            <div class="step-header">
                <div class="step-number">2</div>
                <div class="step-title" data-i18n="optionsTitle">Export Options</div>
            </div>
            <div class="settings-grid">
                <div class="setting-item">
                    <label class="setting-label" for="formatSelect" data-i18n="formatLabel">Image Format</label>
                    <select class="setting-select" id="formatSelect">
                        <option value="png">PNG</option>
                        <option value="jpg">JPG</option>
                    </select>
                </div>
                <div class="setting-item">
                    <label class="setting-label" for="qualityRange"><span data-i18n="qualityLabel">JPG Quality</span>: <strong id="qualityValue">0.90</strong></label>
                    <input class="setting-range" id="qualityRange" type="range" min="0.5" max="0.98" step="0.02" value="0.9">
                </div>
                <div class="setting-item">
                    <label class="setting-label" for="scaleRange"><span data-i18n="scaleLabel">Render Scale</span>: <strong id="scaleValue">1.50</strong></label>
                    <input class="setting-range" id="scaleRange" type="range" min="0.8" max="2.5" step="0.1" value="1.5">
                </div>
                <div class="setting-item">
                    <label class="setting-label" for="rangeInput" data-i18n="rangeLabel">Page Range (optional)</label>
                    <input class="setting-input" id="rangeInput" data-i18n-placeholder="rangePlaceholder" placeholder="Leave empty for all pages. Example: 1-3,5,8">
                    <div class="setting-hint" data-i18n="rangeHint">Use commas to separate ranges like 1-2,5,7-9.</div>
                </div>
            </div>
        </section>

        <!-- Step 3: Action -->
        <section class="workflow-card">
            <div class="step-header">
                <div class="step-number">3</div>
                <div class="step-title" data-i18n="actionTitle">Convert & Download</div>
            </div>
            <div class="action-area">
                <button class="convert-btn" id="convertBtn">
                    ğŸ–¼ï¸ <span data-i18n="convertBtn">Convert to Images</span>
                </button>
                <button class="reset-btn" id="resetBtn" data-i18n="resetBtn">Reset</button>
            </div>
            <div class="status" id="statusText"></div>
            <div class="preview-wrap">
                <img id="previewImg" class="preview-img" alt="Preview">
            </div>
        </section>

        <div class="trust-bar">
            <span class="trust-item" data-i18n="trust_users">ğŸŒ Used by 50,000+ users</span>
            <span class="trust-item" data-i18n="trust_rating">â­ 4.9/5 rating</span>
            <span class="trust-item" data-i18n="trust_privacy">ğŸ”’ 100% Private</span>
            <span class="trust-item" data-i18n="trust_free">ğŸš« No Ads, No Signup</span>
        </div>

        <section class="features-section">
            <h2 data-i18n="featuresTitle">Key PDF to Image Features</h2>
            <div class="features-grid">
                <article class="feature-card">
                    <div>ğŸ”’</div>
                    <h4 data-i18n="feature1Title">100% Free & Private</h4>
                    <p data-i18n="feature1Desc">No ads, no signup, no file upload. Everything runs locally in your browser. Your PDF files never leave your device.</p>
                </article>
                <article class="feature-card">
                    <div>ğŸ“„</div>
                    <h4 data-i18n="feature2Title">Select Page Range</h4>
                    <p data-i18n="feature2Desc">Export all pages or specific ranges in one conversion.</p>
                </article>
                <article class="feature-card">
                    <div>ğŸ“¦</div>
                    <h4 data-i18n="feature3Title">ZIP Batch Download</h4>
                    <p data-i18n="feature3Desc">Multiple page images are downloaded as a ZIP file.</p>
                </article>
                <article class="feature-card">
                    <div>ğŸ”’</div>
                    <h4 data-i18n="feature4Title">Local Conversion</h4>
                    <p data-i18n="feature4Desc">Your PDF stays on device. No server upload required.</p>
                </article>
            </div>
        </section>

        <section class="faq-section">
            <h2 data-i18n="faqTitle">Frequently Asked Questions</h2>
            <div class="faq-item">
                <button class="faq-question" data-i18n="faq1Q">Can I export PDF to JPG and PNG?</button>
                <div class="faq-answer" data-i18n="faq1A">Yes. Choose the output format before conversion.</div>
            </div>
            <div class="faq-item">
                <button class="faq-question" data-i18n="faq2Q">Can I convert selected pages only?</button>
                <div class="faq-answer" data-i18n="faq2A">Yes, enter ranges like 1-3,5,8.</div>
            </div>
            <div class="faq-item">
                <button class="faq-question" data-i18n="faq3Q">Will files be uploaded?</button>
                <div class="faq-answer" data-i18n="faq3A">No, all conversion is done in your browser.</div>
            </div>
            <div class="faq-item">
                <button class="faq-question" data-i18n="faq4Q">How to download many images?</button>
                <div class="faq-answer" data-i18n="faq4A">The tool packs all images into a ZIP file automatically.</div>
            </div>
            <div class="faq-item">
                <button class="faq-question" data-i18n="faq5Q">Is this converter free?</button>
                <div class="faq-answer" data-i18n="faq5A">Yes, it is completely free.</div>
            </div>
            <div class="faq-item">
                <button class="faq-question" data-i18n="faq_free_q">Is this tool really free? Are my files safe?</button>
                <div class="faq-answer" data-i18n="faq_free_a">Yes, 100% free with no ads, no registration, and no usage limits. Unlike other PDF tools, your files are never uploaded to any server â€” all processing happens locally in your browser for maximum privacy.</div>
            </div>
        </section>

        <section class="related-tools">
            <h3 data-i18n="relatedToolsTitle">Related PDF Tools</h3>
            <div class="related-grid">
                <a class="related-card" href="pdf-merge.html">
                    <div>ğŸ“š</div>
                    <h4 data-i18n="relatedTool1">PDF Merge</h4>
                    <p data-i18n="relatedTool1Desc">Combine multiple PDF files into one.</p>
                </a>
                <a class="related-card" href="pdf-split.html">
                    <div>âœ‚ï¸</div>
                    <h4 data-i18n="relatedTool2">PDF Split</h4>
                    <p data-i18n="relatedTool2Desc">Split a PDF into pages or ranges.</p>
                </a>
                <a class="related-card" href="pdf-compress.html">
                    <div>ğŸ—œï¸</div>
                    <h4 data-i18n="relatedTool3">PDF Compress</h4>
                    <p data-i18n="relatedTool3Desc">Reduce PDF size for sharing and upload.</p>
                </a>
                <a class="related-card" href="image-to-pdf.html">
                    <div>ğŸ“„</div>
                    <h4 data-i18n="relatedTool4">Image to PDF</h4>
                    <p data-i18n="relatedTool4Desc">Create PDF files from multiple images.</p>
                </a>
            </div>
        </section>
    </div>

    <script>
    (function() {
        'use strict';

        if (window.pdfjsLib) {
            window.pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
        }

        var i18n = {
            en: {
                tool_name: 'PDF to Image',
                title: 'PDF to Image Converter',
                subtitle: 'Convert PDF pages to PNG or JPG images in your browser',
                uploadTitle: 'Upload PDF File',
                uploadMain: 'Click to select a PDF file',
                uploadHint: 'or drag and drop one PDF here',
                optionsTitle: 'Export Options',
                formatLabel: 'Image Format',
                qualityLabel: 'JPG Quality',
                scaleLabel: 'Render Scale',
                rangeLabel: 'Page Range (optional)',
                rangePlaceholder: 'Leave empty for all pages. Example: 1-3,5,8',
                rangeHint: 'Use commas to separate ranges like 1-2,5,7-9.',
                resetBtn: 'Reset',
                convertBtn: 'Convert to Images',
                actionTitle: 'Convert & Download',
                fileMeta: '{pages} pages Â· {size}',
                statusNeedFile: 'Please upload one PDF file first.',
                statusBadFile: 'Only PDF files are supported.',
                statusBadRange: 'Invalid page range format.',
                statusOutOfRange: 'Range exceeds total page count.',
                statusStart: 'Converting PDF pages...',
                statusPage: 'Rendering page {current}/{total}...',
                statusDone: 'Conversion complete. Download started.',
                statusError: 'Conversion failed. Please try again.',
                featuresTitle: 'Key PDF to Image Features',
                feature1Title: '100% Free & Private',
                feature1Desc: 'No ads, no signup, no file upload. Everything runs locally in your browser. Your PDF files never leave your device.',
                feature2Title: 'Select Page Range',
                feature2Desc: 'Export all pages or specific ranges in one conversion.',
                feature3Title: 'ZIP Batch Download',
                feature3Desc: 'Multiple page images are downloaded as a ZIP file.',
                feature4Title: 'Local Conversion',
                feature4Desc: 'Your PDF stays on device. No server upload required.',
                faqTitle: 'Frequently Asked Questions',
                faq1Q: 'Can I export PDF to JPG and PNG?',
                faq1A: 'Yes. Choose the output format before conversion.',
                faq2Q: 'Can I convert selected pages only?',
                faq2A: 'Yes, enter ranges like 1-3,5,8.',
                faq3Q: 'Will files be uploaded?',
                faq3A: 'No, all conversion is done in your browser.',
                faq4Q: 'How to download many images?',
                faq4A: 'The tool packs all images into a ZIP file automatically.',
                faq5Q: 'Is this converter free?',
                faq5A: 'Yes, it is completely free.',
                faq_free_q: 'Is this tool really free? Are my files safe?',
                faq_free_a: 'Yes, 100% free with no ads, no registration, and no usage limits. Unlike other PDF tools, your files are never uploaded to any server â€” all processing happens locally in your browser for maximum privacy.',
                relatedToolsTitle: 'Related PDF Tools',
                relatedTool1: 'PDF Merge',
                relatedTool1Desc: 'Combine multiple PDF files into one.',
                relatedTool2: 'PDF Split',
                relatedTool2Desc: 'Split a PDF into pages or ranges.',
                relatedTool3: 'PDF Compress',
                relatedTool3Desc: 'Reduce PDF size for sharing and upload.',
                relatedTool4: 'Image to PDF',
                relatedTool4Desc: 'Create PDF files from multiple images.',
                trust_users: 'ğŸŒ Used by 50,000+ users',
                trust_rating: 'â­ 4.9/5 rating',
                trust_privacy: 'ğŸ”’ 100% Private',
                trust_free: 'ğŸš« No Ads, No Signup'
            },
            'zh-CN': {
                tool_name: 'PDF è½¬å›¾ç‰‡',
                title: 'PDF è½¬å›¾ç‰‡',
                subtitle: 'åœ¨æµè§ˆå™¨ä¸­å°† PDF é¡µé¢è½¬æ¢ä¸º PNG æˆ– JPG å›¾ç‰‡',
                uploadTitle: 'ä¸Šä¼  PDF æ–‡ä»¶',
                uploadMain: 'ç‚¹å‡»é€‰æ‹© PDF æ–‡ä»¶',
                uploadHint: 'æˆ–æ‹–æ‹½ä¸€ä¸ª PDF åˆ°æ­¤åŒºåŸŸ',
                optionsTitle: 'å¯¼å‡ºé€‰é¡¹',
                formatLabel: 'å›¾ç‰‡æ ¼å¼',
                qualityLabel: 'JPG è´¨é‡',
                scaleLabel: 'æ¸²æŸ“ç¼©æ”¾',
                rangeLabel: 'é¡µç èŒƒå›´ï¼ˆå¯é€‰ï¼‰',
                rangePlaceholder: 'ç•™ç©ºè¡¨ç¤ºå…¨éƒ¨é¡µé¢ï¼Œä¾‹å¦‚ï¼š1-3,5,8',
                rangeHint: 'å¯ç”¨é€—å·åˆ†éš”å¤šä¸ªèŒƒå›´ï¼Œå¦‚ 1-2,5,7-9ã€‚',
                resetBtn: 'é‡ç½®',
                convertBtn: 'è½¬æ¢ä¸ºå›¾ç‰‡',
                actionTitle: 'è½¬æ¢å¹¶ä¸‹è½½',
                fileMeta: '{pages} é¡µ Â· {size}',
                statusNeedFile: 'è¯·å…ˆä¸Šä¼ ä¸€ä¸ª PDF æ–‡ä»¶ã€‚',
                statusBadFile: 'ä»…æ”¯æŒ PDF æ–‡ä»¶ã€‚',
                statusBadRange: 'é¡µç èŒƒå›´æ ¼å¼æ— æ•ˆã€‚',
                statusOutOfRange: 'é¡µç èŒƒå›´è¶…å‡ºæ€»é¡µæ•°ã€‚',
                statusStart: 'æ­£åœ¨è½¬æ¢ PDF é¡µé¢...',
                statusPage: 'æ­£åœ¨æ¸²æŸ“ç¬¬ {current}/{total} é¡µ...',
                statusDone: 'è½¬æ¢å®Œæˆï¼Œå·²å¼€å§‹ä¸‹è½½ã€‚',
                statusError: 'è½¬æ¢å¤±è´¥ï¼Œè¯·é‡è¯•ã€‚',
                featuresTitle: 'PDF è½¬å›¾ç‰‡æ ¸å¿ƒåŠŸèƒ½',
                feature1Title: '100% å…è´¹ä¸”å®‰å…¨',
                feature1Desc: 'æ— å¹¿å‘Šã€æ— éœ€æ³¨å†Œã€æ–‡ä»¶ä¸ä¸Šä¼ ã€‚æ‰€æœ‰å¤„ç†éƒ½åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼ŒPDF æ–‡ä»¶ä¸ä¼šç¦»å¼€æ‚¨çš„è®¾å¤‡ã€‚',
                feature2Title: 'æŒ‰é¡µèŒƒå›´å¯¼å‡º',
                feature2Desc: 'æ”¯æŒå…¨éƒ¨é¡µé¢æˆ–æŒ‡å®šé¡µç èŒƒå›´å¯¼å‡ºã€‚',
                feature3Title: 'ZIP æ‰¹é‡ä¸‹è½½',
                feature3Desc: 'å¤šé¡µå›¾ç‰‡ä¼šè‡ªåŠ¨æ‰“åŒ…ä¸º ZIP ä¸‹è½½ã€‚',
                feature4Title: 'æœ¬åœ°è½¬æ¢',
                feature4Desc: 'æ–‡ä»¶ä¸ä¸Šä¼ æœåŠ¡å™¨ï¼Œéšç§æ›´å®‰å…¨ã€‚',
                faqTitle: 'å¸¸è§é—®é¢˜',
                faq1Q: 'å¯ä»¥å¯¼å‡º JPG å’Œ PNG å—ï¼Ÿ',
                faq1A: 'å¯ä»¥ï¼Œè½¬æ¢å‰å¯è‡ªç”±é€‰æ‹©è¾“å‡ºæ ¼å¼ã€‚',
                faq2Q: 'å¯ä»¥åªå¯¼å‡ºéƒ¨åˆ†é¡µé¢å—ï¼Ÿ',
                faq2A: 'å¯ä»¥ï¼Œè¾“å…¥ 1-3,5,8 è¿™ç±»èŒƒå›´å³å¯ã€‚',
                faq3Q: 'æ–‡ä»¶ä¼šä¸Šä¼ å—ï¼Ÿ',
                faq3A: 'ä¸ä¼šï¼Œå…¨éƒ¨è½¬æ¢è¿‡ç¨‹éƒ½åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆã€‚',
                faq4Q: 'å¤šå¼ å›¾ç‰‡å¦‚ä½•ä¸‹è½½ï¼Ÿ',
                faq4A: 'å·¥å…·ä¼šè‡ªåŠ¨å°†å¤šå¼ å›¾ç‰‡æ‰“åŒ…æˆ ZIP ä¸‹è½½ã€‚',
                faq5Q: 'è¿™ä¸ªå·¥å…·å…è´¹å—ï¼Ÿ',
                faq5A: 'æ˜¯çš„ï¼Œå®Œå…¨å…è´¹ã€‚',
                faq_free_q: 'è¿™ä¸ªå·¥å…·çœŸçš„å…è´¹å—ï¼Ÿæˆ‘çš„æ–‡ä»¶å®‰å…¨å—ï¼Ÿ',
                faq_free_a: 'æ˜¯çš„ï¼Œ100% å…è´¹ï¼Œæ— å¹¿å‘Šã€æ— éœ€æ³¨å†Œã€æ— ä½¿ç”¨é™åˆ¶ã€‚ä¸å…¶ä»– PDF å·¥å…·ä¸åŒï¼Œæ‚¨çš„æ–‡ä»¶ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨â€”â€”æ‰€æœ‰å¤„ç†éƒ½åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œæœ€å¤§ç¨‹åº¦ä¿æŠ¤éšç§ã€‚',
                relatedToolsTitle: 'ç›¸å…³ PDF å·¥å…·',
                relatedTool1: 'PDF åˆå¹¶',
                relatedTool1Desc: 'å°†å¤šä¸ª PDF æ–‡ä»¶åˆå¹¶æˆä¸€ä¸ªã€‚',
                relatedTool2: 'PDF æ‹†åˆ†',
                relatedTool2Desc: 'æŒ‰å•é¡µæˆ–èŒƒå›´æ‹†åˆ† PDFã€‚',
                relatedTool3: 'PDF å‹ç¼©',
                relatedTool3Desc: 'å‡å° PDF æ–‡ä»¶ä½“ç§¯ï¼Œæ–¹ä¾¿åˆ†äº«ã€‚',
                relatedTool4: 'å›¾ç‰‡è½¬ PDF',
                relatedTool4Desc: 'å°†å¤šå¼ å›¾ç‰‡ç”Ÿæˆ PDF æ–‡ä»¶ã€‚',
                trust_users: 'ğŸŒ è¶…è¿‡ 50,000 ç”¨æˆ·ä½¿ç”¨',
                trust_rating: 'â­ 4.9/5 å¥½è¯„',
                trust_privacy: 'ğŸ”’ 100% éšç§å®‰å…¨',
                trust_free: 'ğŸš« æ— å¹¿å‘Šã€æ— éœ€æ³¨å†Œ'
            },
            fr: {
                tool_name: 'PDF en image',
                title: 'PDF vers image',
                subtitle: 'Convertissez les pages PDF en images PNG ou JPG',
                uploadTitle: 'Importer un fichier PDF',
                uploadMain: 'Cliquez pour choisir un fichier PDF',
                uploadHint: 'ou glissez-dÃ©posez un PDF ici',
                optionsTitle: 'Options d export',
                formatLabel: 'Format image',
                qualityLabel: 'QualitÃ© JPG',
                scaleLabel: 'Ã‰chelle de rendu',
                rangeLabel: 'Plage de pages (optionnel)',
                rangePlaceholder: 'Vide = toutes pages. Ex: 1-3,5,8',
                rangeHint: 'SÃ©parez par virgules, par ex. 1-2,5,7-9.',
                resetBtn: 'RÃ©initialiser',
                convertBtn: 'Convertir en images',
                actionTitle: 'Convertir et tÃ©lÃ©charger',
                fileMeta: '{pages} pages Â· {size}',
                statusNeedFile: 'Veuillez importer un fichier PDF d abord.',
                statusBadFile: 'Seuls les fichiers PDF sont pris en charge.',
                statusBadRange: 'Format de plage invalide.',
                statusOutOfRange: 'La plage dÃ©passe le nombre total de pages.',
                statusStart: 'Conversion des pages PDF...',
                statusPage: 'Rendu page {current}/{total}...',
                statusDone: 'Conversion terminÃ©e. TÃ©lÃ©chargement lancÃ©.',
                statusError: 'Ã‰chec de conversion. RÃ©essayez.',
                featuresTitle: 'Fonctions clÃ©s PDF vers image',
                feature1Title: '100% Gratuit et PrivÃ©',
                feature1Desc: 'Sans publicitÃ©, sans inscription, sans tÃ©lÃ©chargement de fichiers. Tout est traitÃ© localement dans votre navigateur.',
                feature2Title: 'SÃ©lection de pages',
                feature2Desc: 'Exporter toutes les pages ou des plages spÃ©cifiques.',
                feature3Title: 'TÃ©lÃ©chargement ZIP',
                feature3Desc: 'Les images multiples sont regroupÃ©es en ZIP.',
                feature4Title: 'Conversion locale',
                feature4Desc: 'Aucun upload serveur, vos fichiers restent privÃ©s.',
                faqTitle: 'Questions frÃ©quentes',
                faq1Q: 'Puis-je exporter en JPG et PNG ?',
                faq1A: 'Oui, choisissez le format avant la conversion.',
                faq2Q: 'Puis-je convertir certaines pages seulement ?',
                faq2A: 'Oui, saisissez des plages comme 1-3,5,8.',
                faq3Q: 'Les fichiers sont-ils envoyÃ©s ?',
                faq3A: 'Non, tout est converti localement dans le navigateur.',
                faq4Q: 'Comment tÃ©lÃ©charger plusieurs images ?',
                faq4A: 'L outil crÃ©e automatiquement un ZIP.',
                faq5Q: 'Cet outil est-il gratuit ?',
                faq5A: 'Oui, totalement gratuit.',
                faq_free_q: 'Cet outil est-il vraiment gratuit ? Mes fichiers sont-ils en sÃ©curitÃ© ?',
                faq_free_a: 'Oui, 100% gratuit sans publicitÃ©, sans inscription et sans limite. Contrairement Ã  d\'autres outils PDF, vos fichiers ne sont jamais tÃ©lÃ©chargÃ©s sur un serveur.',
                relatedToolsTitle: 'Outils PDF associÃ©s',
                relatedTool1: 'Fusion PDF',
                relatedTool1Desc: 'Combiner plusieurs fichiers PDF en un.',
                relatedTool2: 'DÃ©couper PDF',
                relatedTool2Desc: 'Diviser un PDF par pages ou plages.',
                relatedTool3: 'Compresser PDF',
                relatedTool3Desc: 'RÃ©duire la taille des PDF.',
                relatedTool4: 'Image vers PDF',
                relatedTool4Desc: 'CrÃ©er un PDF Ã  partir de plusieurs images.',
                trust_users: 'ğŸŒ UtilisÃ© par 50 000+ utilisateurs',
                trust_rating: 'â­ Note 4.9/5',
                trust_privacy: 'ğŸ”’ 100% PrivÃ©',
                trust_free: 'ğŸš« Sans pub, sans inscription'
            },
            es: {
                tool_name: 'PDF a imagen',
                title: 'PDF a imagen',
                subtitle: 'Convierte pÃ¡ginas PDF en imÃ¡genes PNG o JPG',
                uploadTitle: 'Subir archivo PDF',
                uploadMain: 'Haz clic para seleccionar un archivo PDF',
                uploadHint: 'o arrastra y suelta un PDF aquÃ­',
                optionsTitle: 'Opciones de exportaciÃ³n',
                formatLabel: 'Formato de imagen',
                qualityLabel: 'Calidad JPG',
                scaleLabel: 'Escala de renderizado',
                rangeLabel: 'Rango de pÃ¡ginas (opcional)',
                rangePlaceholder: 'VacÃ­o = todas las pÃ¡ginas. Ej: 1-3,5,8',
                rangeHint: 'Usa comas para separar rangos, ej. 1-2,5,7-9.',
                resetBtn: 'Restablecer',
                convertBtn: 'Convertir a imÃ¡genes',
                actionTitle: 'Convertir y descargar',
                fileMeta: '{pages} pÃ¡ginas Â· {size}',
                statusNeedFile: 'Primero sube un archivo PDF.',
                statusBadFile: 'Solo se admiten archivos PDF.',
                statusBadRange: 'Formato de rango invÃ¡lido.',
                statusOutOfRange: 'El rango supera el total de pÃ¡ginas.',
                statusStart: 'Convirtiendo pÃ¡ginas PDF...',
                statusPage: 'Renderizando pÃ¡gina {current}/{total}...',
                statusDone: 'ConversiÃ³n completada. Descarga iniciada.',
                statusError: 'ConversiÃ³n fallida. IntÃ©ntalo de nuevo.',
                featuresTitle: 'Funciones clave PDF a imagen',
                feature1Title: '100% Gratis y Privado',
                feature1Desc: 'Sin anuncios, sin registro, sin subir archivos. Todo se procesa localmente en tu navegador. Tus archivos PDF nunca salen de tu dispositivo.',
                feature2Title: 'Seleccionar rango',
                feature2Desc: 'Exporta todas las pÃ¡ginas o rangos especÃ­ficos.',
                feature3Title: 'Descarga ZIP',
                feature3Desc: 'MÃºltiples imÃ¡genes se descargan en ZIP.',
                feature4Title: 'ConversiÃ³n local',
                feature4Desc: 'Sin subir archivos. Todo se procesa localmente.',
                faqTitle: 'Preguntas frecuentes',
                faq1Q: 'Â¿Puedo exportar a JPG y PNG?',
                faq1A: 'SÃ­, elige el formato antes de convertir.',
                faq2Q: 'Â¿Puedo convertir solo algunas pÃ¡ginas?',
                faq2A: 'SÃ­, escribe rangos como 1-3,5,8.',
                faq3Q: 'Â¿Se suben mis archivos?',
                faq3A: 'No, toda la conversiÃ³n es local en el navegador.',
                faq4Q: 'Â¿CÃ³mo descargo muchas imÃ¡genes?',
                faq4A: 'La herramienta empaqueta todo en un ZIP.',
                faq5Q: 'Â¿Es gratuita esta herramienta?',
                faq5A: 'SÃ­, completamente gratuita.',
                faq_free_q: 'Â¿Es realmente gratuito? Â¿Mis archivos estÃ¡n seguros?',
                faq_free_a: 'SÃ­, 100% gratuito sin anuncios, sin registro y sin lÃ­mites. A diferencia de otras herramientas PDF, sus archivos nunca se suben a ningÃºn servidor.',
                relatedToolsTitle: 'Herramientas PDF relacionadas',
                relatedTool1: 'Unir PDF',
                relatedTool1Desc: 'Combina varios archivos PDF en uno.',
                relatedTool2: 'Dividir PDF',
                relatedTool2Desc: 'Divide un PDF por pÃ¡ginas o rangos.',
                relatedTool3: 'Comprimir PDF',
                relatedTool3Desc: 'Reduce el tamaÃ±o de los archivos PDF.',
                relatedTool4: 'Imagen a PDF',
                relatedTool4Desc: 'Crea PDF a partir de varias imÃ¡genes.',
                trust_users: 'ğŸŒ Usado por mÃ¡s de 50,000 usuarios',
                trust_rating: 'â­ CalificaciÃ³n 4.9/5',
                trust_privacy: 'ğŸ”’ 100% Privado',
                trust_free: 'ğŸš« Sin anuncios, sin registro'
            }
        };
        // è·å–å½“å‰è¯­è¨€
        function getLang() {
            return (typeof WebToolbox !== 'undefined') ? WebToolbox.getCurrentLang() : (localStorage.getItem('toolbox_lang') || 'en');
        }

        var fileInput = document.getElementById('fileInput');
        var uploadZone = document.getElementById('uploadZone');
        var fileInfo = document.getElementById('fileInfo');
        var fileNameEl = document.getElementById('fileName');
        var fileMetaEl = document.getElementById('fileMeta');
        var formatSelect = document.getElementById('formatSelect');
        var qualityRange = document.getElementById('qualityRange');
        var qualityValue = document.getElementById('qualityValue');
        var scaleRange = document.getElementById('scaleRange');
        var scaleValue = document.getElementById('scaleValue');
        var rangeInput = document.getElementById('rangeInput');
        var resetBtn = document.getElementById('resetBtn');
        var convertBtn = document.getElementById('convertBtn');
        var statusText = document.getElementById('statusText');
        var previewImg = document.getElementById('previewImg');
        var source = null;

        function t(key) {
            var dict = i18n[getLang()] || i18n.en;
            return dict[key] || i18n.en[key] || key;
        }


        function fileSize(bytes) {
            if (bytes < 1024) return bytes + ' B';
            if (bytes < 1048576) return (bytes / 1024).toFixed(1) + ' KB';
            return (bytes / 1048576).toFixed(2) + ' MB';
        }

        function setStatus(key, custom) {
            statusText.textContent = custom || t(key);
        }

        function updateSliderLabels() {
            qualityValue.textContent = Number(qualityRange.value).toFixed(2);
            scaleValue.textContent = Number(scaleRange.value).toFixed(2);
        }

        function updateFileInfo() {
            if (!source) {
                fileInfo.classList.remove('show');
                previewImg.classList.remove('show');
                previewImg.removeAttribute('src');
                return;
            }
            fileInfo.classList.add('show');
            fileNameEl.textContent = source.file.name;
            fileMetaEl.textContent = t('fileMeta').replace('{pages}', String(source.pages)).replace('{size}', fileSize(source.file.size));
        }

        function parseRanges(input, totalPages) {
            var text = (input || '').trim();
            if (!text) {
                var all = [];
                for (var i = 1; i <= totalPages; i++) all.push(i);
                return all;
            }
            var parts = text.split(',').map(function(p) { return p.trim(); }).filter(Boolean);
            if (!parts.length) throw new Error('badRange');
            var set = new Set();

            for (var j = 0; j < parts.length; j++) {
                var part = parts[j];
                var match = part.match(/^(\d+)(?:-(\d+))?$/);
                if (!match) throw new Error('badRange');
                var start = parseInt(match[1], 10);
                var end = match[2] ? parseInt(match[2], 10) : start;
                if (isNaN(start) || isNaN(end) || start < 1 || end < 1 || start > end) throw new Error('badRange');
                if (end > totalPages) throw new Error('outOfRange');
                for (var p = start; p <= end; p++) set.add(p);
            }
            return Array.from(set).sort(function(a, b) { return a - b; });
        }

        async function loadPdf(file) {
            if (!file || (!/\.pdf$/i.test(file.name) && file.type !== 'application/pdf')) throw new Error('badFile');
            var buffer = await file.arrayBuffer();
            var data = new Uint8Array(buffer);
            var task = pdfjsLib.getDocument({ data: data.slice() });
            var pdf = await task.promise;
            source = { file: file, data: data, pages: pdf.numPages };

            var firstPage = await pdf.getPage(1);
            var viewport = firstPage.getViewport({ scale: 0.4 });
            var canvas = document.createElement('canvas');
            canvas.width = Math.max(1, Math.round(viewport.width));
            canvas.height = Math.max(1, Math.round(viewport.height));
            var ctx = canvas.getContext('2d', { alpha: false });
            await firstPage.render({ canvasContext: ctx, viewport: viewport }).promise;
            previewImg.src = canvas.toDataURL('image/png');
            previewImg.classList.add('show');

            await pdf.destroy();
            updateFileInfo();
            setStatus('', '');
        }

        function downloadBlob(blob, filename) {
            var url = URL.createObjectURL(blob);
            var a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            a.remove();
            URL.revokeObjectURL(url);
        }

        async function convertPdf() {
            if (!source) {
                setStatus('statusNeedFile');
                return;
            }
            try {
                convertBtn.disabled = true;
                setStatus('statusStart');

                var format = formatSelect.value;
                var quality = Number(qualityRange.value);
                var scale = Number(scaleRange.value);

                var task = pdfjsLib.getDocument({ data: source.data.slice() });
                var pdf = await task.promise;
                var pages = parseRanges(rangeInput.value, pdf.numPages);
                var results = [];

                for (var i = 0; i < pages.length; i++) {
                    var pageNo = pages[i];
                    setStatus('statusPage', t('statusPage').replace('{current}', String(i + 1)).replace('{total}', String(pages.length)));
                    var page = await pdf.getPage(pageNo);
                    var viewport = page.getViewport({ scale: scale });

                    var canvas = document.createElement('canvas');
                    canvas.width = Math.max(1, Math.round(viewport.width));
                    canvas.height = Math.max(1, Math.round(viewport.height));
                    var ctx = canvas.getContext('2d', { alpha: false });
                    await page.render({ canvasContext: ctx, viewport: viewport }).promise;

                    var mime = format === 'png' ? 'image/png' : 'image/jpeg';
                    var dataUrl = canvas.toDataURL(mime, quality);
                    var base64 = dataUrl.split(',')[1];
                    results.push({
                        name: 'page-' + String(pageNo).padStart(3, '0') + '.' + (format === 'png' ? 'png' : 'jpg'),
                        base64: base64,
                        mime: mime
                    });
                }

                if (results.length === 1) {
                    var b = atob(results[0].base64);
                    var bytes = new Uint8Array(b.length);
                    for (var n = 0; n < b.length; n++) bytes[n] = b.charCodeAt(n);
                    downloadBlob(new Blob([bytes], { type: results[0].mime }), results[0].name);
                } else {
                    var zip = new JSZip();
                    results.forEach(function(item) {
                        zip.file(item.name, item.base64, { base64: true });
                    });
                    var zipBlob = await zip.generateAsync({ type: 'blob' });
                    downloadBlob(zipBlob, 'pdf-images.zip');
                }

                setStatus('statusDone');
                await pdf.destroy();
            } catch (err) {
                if (err && err.message === 'badRange') setStatus('statusBadRange');
                else if (err && err.message === 'outOfRange') setStatus('statusOutOfRange');
                else if (err && err.message === 'badFile') setStatus('statusBadFile');
                else setStatus('statusError');
            } finally {
                convertBtn.disabled = false;
            }
        }

        fileInput.addEventListener('change', function(e) {
            loadPdf(e.target.files && e.target.files[0]).catch(function(err) {
                if (err && err.message === 'badFile') setStatus('statusBadFile');
                else setStatus('statusError');
            });
            fileInput.value = '';
        });

        ['dragenter', 'dragover'].forEach(function(name) {
            uploadZone.addEventListener(name, function(e) {
                e.preventDefault();
                e.stopPropagation();
                uploadZone.classList.add('dragover');
            });
        });
        ['dragleave', 'drop'].forEach(function(name) {
            uploadZone.addEventListener(name, function(e) {
                e.preventDefault();
                e.stopPropagation();
                uploadZone.classList.remove('dragover');
            });
        });
        uploadZone.addEventListener('drop', function(e) {
            var file = e.dataTransfer && e.dataTransfer.files && e.dataTransfer.files[0];
            loadPdf(file).catch(function(err) {
                if (err && err.message === 'badFile') setStatus('statusBadFile');
                else setStatus('statusError');
            });
        });

        qualityRange.addEventListener('input', updateSliderLabels);
        scaleRange.addEventListener('input', updateSliderLabels);

        resetBtn.addEventListener('click', function() {
            formatSelect.value = 'png';
            qualityRange.value = '0.9';
            scaleRange.value = '1.5';
            rangeInput.value = '';
            updateSliderLabels();
            setStatus('', '');
        });

        convertBtn.addEventListener('click', convertPdf);

        updateSliderLabels();

        window._translations = i18n;
    })();
    </script>
    <script src="common/common.js" data-tool-id="pdf-to-image" data-tool-name="PDF to JPG/PNG" data-category="pdf"></script>
    <script>WebToolbox.init(window._translations);</script>
</body>
</html>
