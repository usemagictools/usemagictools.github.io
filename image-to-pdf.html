<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-CT8E5N460D"></script>
    <script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-CT8E5N460D');</script>

    <!-- ===================== SEO META ===================== -->
    <title>Image to PDF - Free Online Converter | No Ads, No Signup | å›¾ç‰‡è½¬PDF | Web Toolbox</title>
    <meta name="description" content="Free online image to PDF converter. Merge multiple images into one PDF with drag-and-drop sorting, clipboard paste, and QR code upload. Supports JPG/PNG/WEBP formats. âœ… No ads âœ… No signup âœ… No watermark. Runs entirely in your browser.">
    <meta name="keywords" content="image to pdf,merge images pdf,convert images to pdf,online pdf generator,free pdf tool,drag drop pdf, no ads, no signup, no watermark, no login, free unlimited, browser-based, no installation, local processing">
    <meta name="author" content="UseMagicTools">
    <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
    <meta name="googlebot" content="index, follow">
    <meta name="bingbot" content="index, follow">
    <meta name="revisit-after" content="7 days">
    <meta name="rating" content="general">
    <meta name="distribution" content="global">
    <meta name="language" content="en">
    <link rel="canonical" href="https://www.usemagictools.com/image-to-pdf.html">
    <link rel="alternate" hreflang="en" href="https://www.usemagictools.com/image-to-pdf.html">
    <link rel="alternate" hreflang="zh-CN" href="https://www.usemagictools.com/image-to-pdf.html">
    <link rel="alternate" hreflang="fr" href="https://www.usemagictools.com/image-to-pdf.html">
    <link rel="alternate" hreflang="es" href="https://www.usemagictools.com/image-to-pdf.html">
    <link rel="alternate" hreflang="x-default" href="https://www.usemagictools.com/image-to-pdf.html">

    <meta property="og:type" content="website">
    <meta property="og:url" content="https://www.usemagictools.com/image-to-pdf.html">
    <meta property="og:title" content="Image to PDF - Free Online Converter | No Ads, No Signup | å›¾ç‰‡è½¬PDF">
    <meta property="og:description" content="Free online image to PDF converter. Merge multiple images with drag-and-drop sorting, clipboard paste support.">
    <meta property="og:image" content="https://www.usemagictools.com/screenshots/image-to-pdf-v1.webp">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:locale" content="en_US">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:site" content="@usemagictools">
    <meta name="twitter:creator" content="@usemagictools">
    <meta name="twitter:title" content="Image to PDF - Free Online Converter | No Ads, No Signup | å›¾ç‰‡è½¬PDF">
    <meta name="twitter:description" content="Free online image to PDF converter with drag-and-drop sorting, clipboard paste, QR code upload.">

    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "WebApplication",
        "name": "Image to PDF Converter",
        "alternateName": ["å›¾ç‰‡è½¬PDF", "Image to PDF Converter", "JPG to PDF"],
        "description": "Free online image to PDF converter. Merge multiple images into one PDF with drag-and-drop sorting and clipboard paste support",
        "url": "https://www.usemagictools.com/image-to-pdf.html",
        "applicationCategory": "UtilitiesApplication",
        "operatingSystem": "Web Browser",
        "offers": {"@type": "Offer", "price": "0", "priceCurrency": "USD"},
        "featureList": ["No ads", "No signup required", "No watermark", "100% browser-based", "Unlimited usage", "Local processing"],
        "author": {"@type": "Person", "name": "UseMagicTools"},
        "publisher": {"@type": "Organization", "name": "Web Toolbox", "url": "https://www.usemagictools.com/"},
        "screenshot": "https://www.usemagictools.com/screenshots/image-to-pdf-v1.webp"
    }
    </script>
    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
        {
            "@type": "Question",
            "name": "What image formats are supported?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "This free image-to-PDF converter supports all major formats including JPG/JPEG, PNG, WebP, GIF, and BMP. Each image is embedded into the PDF at its original resolution for maximum quality. You can combine multiple formats in a single PDF document. All processing runs locally in your browser with no signup, no ads, and no server upload required."
            }
        },
        {
            "@type": "Question",
            "name": "How many images can I merge at once?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "There is no fixed limit on the number of images. The practical capacity depends on your device's browser memory â€” we recommend batches of up to 100 images for optimal performance. Each image is processed sequentially using the jsPDF library entirely in your browser. This free tool requires no signup, and your images are never uploaded to any server."
            }
        },
        {
            "@type": "Question",
            "name": "Can I reorder the images?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes. After uploading your images, you can drag and drop the thumbnails to rearrange them in any order you prefer. The final PDF will follow your custom page sequence. You can also remove individual images from the queue before generating the PDF. This free browser-based tool requires no signup and keeps all your images completely private."
            }
        },
        {
            "@type": "Question",
            "name": "What page sizes are supported?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "This free converter supports common paper sizes including A4, A3, Letter, Legal, and more. You can choose to fit images to the page or maintain original dimensions. Page orientation (portrait/landscape) can be set per document. All PDF generation runs locally in your browser using the jsPDF library with no signup, no ads, and no server upload."
            }
        },
        {
            "@type": "Question",
            "name": "Are my images uploaded to a server?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "No. The entire conversion process runs locally in your browser using the jsPDF JavaScript library. Your images are never uploaded to any external server or cloud service. The generated PDF file is created entirely on your device and downloaded directly. This ensures complete privacy and data security. The tool is 100% free with no signup or ads."
            }
        },
        {
            "@type": "Question",
            "name": "Is this tool really free with no ads?",
            "acceptedAnswer": {
                "@type": "Answer",
                "text": "Yes, 100% free with no ads, no registration, no watermark, and no usage limits. All processing happens locally in your browser â€” your data is never uploaded to any server."
            }
        }
    ]
}
</script>
    <!-- JSON-LD: BreadcrumbList -->
    <script type="application/ld+json">{"@context": "https://schema.org", "@type": "BreadcrumbList", "itemListElement": [{"@type": "ListItem", "position": 1, "name": "Home", "item": "https://www.usemagictools.com/"}, {"@type": "ListItem", "position": 2, "name": "Image to PDF", "item": "https://www.usemagictools.com/image-to-pdf.html"}]}</script>
    <!-- JSON-LD: HowTo -->
    <script type="application/ld+json">{"@context": "https://schema.org", "@type": "HowTo", "name": "How to Use Image to PDF Converter", "totalTime": "PT1M", "step": [{"@type": "HowToStep", "position": 1, "name": "Upload Images", "text": "Drag and drop or select multiple images (JPG, PNG, WebP, etc.) to convert."}, {"@type": "HowToStep", "position": 2, "name": "Arrange and Configure", "text": "Reorder images by dragging, set page size (A4, Letter, etc.), margins, and orientation."}, {"@type": "HowToStep", "position": 3, "name": "Generate PDF", "text": "Click Convert to create a PDF file from your images and download it instantly."}]}</script>
    <!-- ===================== /SEO META ===================== -->

    <!-- ===================== TOOL_META ===================== -->
    <script>
    const TOOL_META = {
        slug: 'image-to-pdf',
        name: 'Image to PDF Converter',
        description: 'Merge multiple images into PDF with drag-and-drop sorting, clipboard paste, QR code upload',
        keywords: ['Image to PDF', 'Merge PDF', 'Screenshot to PDF', 'Drag Drop']
    };
    </script>
    <!-- ===================== /TOOL_META ===================== -->

    <!-- ä¾èµ–åº“ -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

    <!-- ===================== UI ===================== -->
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%);
            min-height: 100vh;
            color: #e4e4e7;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 40px;
        }

        h1 {
            font-size: 2.2rem;
            font-weight: 700;
            background: linear-gradient(120deg, #00d4ff, #7c3aed, #f472b6);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 12px;
        }

        /* ä¸»ä½“å¸ƒå±€ */
        .main-layout {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 24px;
        }

        @media (max-width: 900px) {
            .main-layout {
                grid-template-columns: 1fr;
            }
        }

        /* å¡ç‰‡ */
        .card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 24px;
        }

        .card-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* ä¸Šä¼ åŒºåŸŸ */
        .upload-zone {
            border: 2px dashed rgba(124, 58, 237, 0.4);
            border-radius: 12px;
            padding: 40px 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            background: rgba(124, 58, 237, 0.05);
            margin-bottom: 20px;
        }

        .upload-zone:hover,
        .upload-zone.dragover {
            border-color: #7c3aed;
            background: rgba(124, 58, 237, 0.15);
        }

        .upload-zone.dragover {
            transform: scale(1.02);
        }

        .upload-icon {
            font-size: 3rem;
            margin-bottom: 16px;
        }

        .upload-text {
            color: #d4d4d8;
            margin-bottom: 8px;
        }

        .upload-hint {
            color: #71717a;
            font-size: 0.85rem;
        }

        .upload-hint kbd {
            background: rgba(255, 255, 255, 0.1);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: inherit;
        }

        .hidden-input {
            display: none;
        }

        /* å¿«æ·ä¸Šä¼ æŒ‰é’® */
        .quick-upload {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .quick-btn {
            flex: 1;
            min-width: 140px;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 10px;
            color: #e4e4e7;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            font-size: 0.95rem;
        }

        .quick-btn:hover {
            background: rgba(124, 58, 237, 0.2);
            border-color: rgba(124, 58, 237, 0.5);
        }

        /* å›¾ç‰‡åˆ—è¡¨ */
        .image-list {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 16px;
            min-height: 100px;
        }

        .image-list:empty::before {
            content: attr(data-empty-text);
            grid-column: 1 / -1;
            text-align: center;
            color: #71717a;
            padding: 40px;
        }

        .image-item {
            position: relative;
            border-radius: 10px;
            overflow: hidden;
            background: rgba(0, 0, 0, 0.3);
            cursor: grab;
            transition: all 0.2s;
            aspect-ratio: 1;
        }

        .image-item:hover {
            transform: scale(1.03);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
        }

        .image-item.sortable-ghost {
            opacity: 0.4;
        }

        .image-item.sortable-chosen {
            box-shadow: 0 0 0 3px #7c3aed;
        }

        .image-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .image-index {
            position: absolute;
            top: 8px;
            left: 8px;
            background: rgba(0, 0, 0, 0.7);
            color: #fff;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
            font-weight: 600;
        }

        .image-remove {
            position: absolute;
            top: 8px;
            right: 8px;
            background: rgba(239, 68, 68, 0.9);
            color: #fff;
            border: none;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1rem;
            opacity: 0;
            transition: opacity 0.2s;
        }

        .image-item:hover .image-remove {
            opacity: 1;
        }

        .image-remove:hover {
            background: #dc2626;
        }

        .image-name {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 6px 8px;
            background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
            color: #fff;
            font-size: 0.7rem;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        /* è®¾ç½®æ¨¡å—ï¼ˆç‹¬ç«‹è¡Œï¼‰ */
        .settings-card {
            margin-top: 24px;
        }
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            margin-bottom: 24px;
        }
        @media (max-width: 900px) {
            .settings-grid { grid-template-columns: 1fr 1fr; }
        }
        @media (max-width: 600px) {
            .settings-grid { grid-template-columns: 1fr; }
        }
        .settings-actions {
            display: flex;
            align-items: center;
            gap: 16px;
            flex-wrap: wrap;
        }
        .settings-actions .stats { flex: 1; min-width: 120px; margin-bottom: 0; }
        .settings-actions .generate-btn { flex: 1; min-width: 180px; }
        .settings-actions .clear-btn { margin-top: 0; min-width: 140px; }
        .settings-divider {
            height: 1px;
            background: rgba(255,255,255,0.08);
            margin: 24px 0;
        }

        .settings-section {
            margin-bottom: 0;
        }

        .setting-label {
            display: block;
            color: #a1a1aa;
            font-size: 0.85rem;
            margin-bottom: 8px;
        }

        .setting-select,
        .setting-input {
            width: 100%;
            padding: 10px 12px;
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(255, 255, 255, 0.15);
            border-radius: 8px;
            color: #e4e4e7;
            font-size: 0.95rem;
            outline: none;
            transition: border-color 0.2s;
        }

        .setting-select:focus,
        .setting-input:focus {
            border-color: #7c3aed;
        }

        .setting-select option {
            background: #1a1a2e;
        }

        /* äºŒç»´ç åŒºåŸŸ */
        .qrcode-section {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 12px;
            margin-bottom: 24px;
        }

        .qrcode-title {
            font-size: 0.9rem;
            color: #a1a1aa;
            margin-bottom: 12px;
        }

        #qrcode {
            display: inline-block;
            padding: 12px;
            background: #fff;
            border-radius: 8px;
        }

        #qrcode img {
            display: block;
        }

        .qrcode-hint {
            font-size: 0.75rem;
            color: #71717a;
            margin-top: 10px;
        }

        /* ç»Ÿè®¡ä¿¡æ¯ */
        .stats {
            display: flex;
            justify-content: space-between;
            padding: 12px 16px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 8px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.5rem;
            font-weight: 700;
            color: #7c3aed;
        }

        .stat-label {
            font-size: 0.75rem;
            color: #71717a;
        }

        /* ç”ŸæˆæŒ‰é’® */
        .generate-btn {
            width: 100%;
            padding: 14px 24px;
            background: linear-gradient(135deg, #7c3aed, #6366f1);
            color: #fff;
            border: none;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .generate-btn:hover:not(:disabled) {
            background: linear-gradient(135deg, #8b5cf6, #818cf8);
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(124, 58, 237, 0.3);
        }

        .generate-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .generate-btn.loading {
            pointer-events: none;
        }

        /* æ¸…ç©ºæŒ‰é’® */
        .clear-btn {
            width: 100%;
            padding: 10px;
            background: transparent;
            border: 1px solid rgba(239, 68, 68, 0.5);
            color: #f87171;
            border-radius: 8px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s;
            margin-top: 12px;
        }

        .clear-btn:hover {
            background: rgba(239, 68, 68, 0.1);
            border-color: #f87171;
        }

        /* è¿›åº¦æ¡ */
        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            margin-top: 12px;
            display: none;
        }

        .progress-bar.active {
            display: block;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #7c3aed, #06b6d4);
            border-radius: 3px;
            transition: width 0.3s;
        }

        .usage-list {
            list-style: none;
        }

        .usage-list li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
            display: flex;
            gap: 12px;
            color: #a1a1aa;
            font-size: 0.9rem;
        }

        .usage-list li:last-child {
            border-bottom: none;
        }

        .usage-step {
            width: 24px;
            height: 24px;
            background: rgba(124, 58, 237, 0.2);
            color: #a78bfa;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: 600;
            flex-shrink: 0;
        }

        /* Toast æç¤º */
        .toast {
            position: fixed;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(0, 0, 0, 0.9);
            color: #fff;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 0.9rem;
            opacity: 0;
            transition: all 0.3s;
            z-index: 1000;
        }

        .toast.show {
            transform: translateX(-50%) translateY(0);
            opacity: 1;
        }

        .toast.success {
            background: rgba(34, 197, 94, 0.9);
        }

        .toast.error {
            background: rgba(239, 68, 68, 0.9);
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: #71717a;
            font-size: 0.85rem;
        }

        footer a {
            color: #a78bfa;
            text-decoration: none;
        }

        /* åŠŸèƒ½ç‰¹ç‚¹åŒºå— */
        .features-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 24px;
            text-align: center;
            transition: all 0.3s;
        }

        .feature-card:hover {
            background: rgba(124, 58, 237, 0.1);
            border-color: rgba(124, 58, 237, 0.3);
            transform: translateY(-4px);
        }

        .feature-icon {
            font-size: 2.5rem;
            margin-bottom: 12px;
        }

        .feature-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #fff;
            margin-bottom: 8px;
        }

        .feature-desc {
            font-size: 0.9rem;
            color: #a1a1aa;
            line-height: 1.5;
        }

        /* FAQ */
        .faq-section { margin: 40px 0; }
        .faq-section h3 { font-size: 1.2rem; margin-bottom: 20px; padding-bottom: 10px; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .faq-item { background: rgba(255,255,255,0.03); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; overflow: hidden; margin-bottom: 12px; }
        .faq-question { width: 100%; padding: 16px 20px; background: transparent; border: none; color: #e4e4e7; font-size: 1rem; font-weight: 500; text-align: left; cursor: pointer; display: flex; align-items: center; justify-content: space-between; gap: 16px; transition: background 0.2s ease; }
        .faq-question:hover { background: rgba(255,255,255,0.05); }
        .faq-question::after { content: "+"; font-size: 1.5rem; font-weight: 300; color: #a1a1aa; transition: transform 0.3s ease; flex-shrink: 0; }
        .faq-item.active .faq-question::after { transform: rotate(45deg); color: #7c3aed; }
        .faq-answer { max-height: 0; overflow: hidden; transition: max-height 0.3s ease; }
        .faq-item.active .faq-answer { max-height: 500px; }
        .faq-answer p { padding: 0 20px 16px; color: #a1a1aa; line-height: 1.7; }

        @media (max-width: 600px) {
            h1 {
                font-size: 1.6rem;
            }

            .quick-upload {
                flex-direction: column;
            }

            .quick-btn {
                min-width: 100%;
            }

            .image-list {
                grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            }
        }
        </style>
    <!-- ===================== /UI ===================== -->
    <link rel="stylesheet" href="common/common.css">
</head>
<body>
<div class="container">
<h1 data-i18n="pageTitle">ğŸ“„ Image to PDF Converter</h1>

        <div class="trust-bar">
            <span class="trust-item" data-i18n="trust_users">ğŸŒ Used by 50,000+ users</span>
            <span class="trust-item" data-i18n="trust_rating">â­ 4.9/5 rating</span>
            <span class="trust-item" data-i18n="trust_privacy">ğŸ”’ 100% Private</span>
            <span class="trust-item" data-i18n="trust_free">ğŸš« No Ads, No Signup</span>
        </div>

        <!-- åŠŸèƒ½ç‰¹ç‚¹ -->
        <section class="features-section">
            <div class="feature-card">
                <div class="feature-icon">ğŸ”’</div>
                <h3 class="feature-title" data-i18n="featureBatchTitle">100% Free & Private</h3>
                <p class="feature-desc" data-i18n="featureBatchDesc">No ads, no signup, no watermark. Everything runs locally in your browser. Your data never leaves your device.</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ”€</div>
                <h3 class="feature-title" data-i18n="featureOrderTitle">Reorder</h3>
                <p class="feature-desc" data-i18n="featureOrderDesc">Drag and drop to reorder images, customize PDF page sequence</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">ğŸ“</div>
                <h3 class="feature-title" data-i18n="featurePageTitle">Page Settings</h3>
                <p class="feature-desc" data-i18n="featurePageDesc">Supports A4, Letter and more page sizes with orientation options</p>
            </div>
            <div class="feature-card">
                <div class="feature-icon">âš¡</div>
                <h3 class="feature-title" data-i18n="featureInstantTitle">Instant Generate</h3>
                <p class="feature-desc" data-i18n="featureInstantDesc">Convert locally in browser, download instantly without waiting</p>
            </div>
        </section>

        <div class="main-layout">
            <!-- å·¦ä¾§ï¼šä¸Šä¼ å’Œå›¾ç‰‡åˆ—è¡¨ -->
            <div class="left-panel">
                <div class="card">
                    <h2 class="card-title" data-i18n="uploadTitle">ğŸ“¤ Upload Images</h2>

                    <!-- ä¸Šä¼ åŒºåŸŸ -->
                    <div class="upload-zone" id="uploadZone">
                        <div class="upload-icon">ğŸ–¼ï¸</div>
                        <p class="upload-text" data-i18n="uploadText">Click to select images or drag and drop here</p>
                        <p class="upload-hint" data-i18n="uploadHint">
                            Supports JPG / PNG / WEBP / GIF / BMP formats<br>
                            Paste screenshot: <kbd>Ctrl</kbd> + <kbd>V</kbd> (Mac: <kbd>âŒ˜</kbd> + <kbd>V</kbd>)
                        </p>
                    </div>
                    <input type="file" id="fileInput" class="hidden-input" multiple accept="image/*">

                    <!-- å¿«æ·æŒ‰é’® -->
                    <div class="quick-upload">
                        <button class="quick-btn" id="btnSelectFiles">
                            ğŸ“ <span data-i18n="selectFiles">Select Files</span>
                        </button>
                        <button class="quick-btn" id="btnSelectFolder">
                            ğŸ“‚ <span data-i18n="selectFolder">Select Folder</span>
                        </button>
                    </div>
                    <input type="file" id="folderInput" class="hidden-input" webkitdirectory multiple accept="image/*">

                    <!-- å›¾ç‰‡åˆ—è¡¨ -->
                    <h3 class="card-title" style="margin-top: 24px;">ğŸ–¼ï¸ <span data-i18n="imageListTitle">Image List</span> <span style="font-weight: normal; font-size: 0.85rem; color: #71717a;" data-i18n="imageListHint">(Drag to reorder)</span></h3>
                    <div class="image-list" id="imageList" data-empty-text="No images, please upload images"></div>
                </div>
            </div>

            <!-- å³ä¾§ï¼šäºŒç»´ç  -->
            <div class="right-panel">
                <div class="card">
                    <div class="qrcode-section">
                        <p class="qrcode-title" data-i18n="qrcodeTitle">ğŸ“± Scan to Upload from Phone</p>
                        <div id="qrcode"></div>
                        <p class="qrcode-hint" data-i18n="qrcodeHint">Scan QR code to open this tool<br>Select images directly on your phone</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- è®¾ç½® + ä½¿ç”¨è¯´æ˜ï¼ˆåˆå¹¶æ¨¡å—ï¼‰ -->
        <div class="card settings-card">
            <h2 class="card-title" data-i18n="settingsTitle">âš™ï¸ PDF Settings</h2>
            <div class="settings-grid">
                <div class="settings-section">
                    <label class="setting-label" data-i18n="pageSizeLabel">Page Size</label>
                    <select class="setting-select" id="pageSize">
                        <option value="a4" data-i18n="pageSizeA4">A4 (210 Ã— 297 mm)</option>
                        <option value="a3" data-i18n="pageSizeA3">A3 (297 Ã— 420 mm)</option>
                        <option value="a5" data-i18n="pageSizeA5">A5 (148 Ã— 210 mm)</option>
                        <option value="letter" data-i18n="pageSizeLetter">Letter (216 Ã— 279 mm)</option>
                        <option value="fit" selected data-i18n="pageSizeFit">Fit to Image Size</option>
                    </select>
                </div>
                <div class="settings-section">
                    <label class="setting-label" data-i18n="orientationLabel">Page Orientation</label>
                    <select class="setting-select" id="pageOrientation">
                        <option value="auto" selected data-i18n="orientationAuto">Auto Detect</option>
                        <option value="portrait" data-i18n="orientationPortrait">Portrait</option>
                        <option value="landscape" data-i18n="orientationLandscape">Landscape</option>
                    </select>
                </div>
                <div class="settings-section">
                    <label class="setting-label" data-i18n="qualityLabel">Image Quality</label>
                    <select class="setting-select" id="imageQuality">
                        <option value="1" data-i18n="qualityHighest">Highest Quality</option>
                        <option value="0.9" selected data-i18n="qualityHigh">High Quality (Recommended)</option>
                        <option value="0.7" data-i18n="qualityMedium">Medium Quality</option>
                        <option value="0.5" data-i18n="qualityLow">Low Quality (Smaller File)</option>
                    </select>
                </div>
                <div class="settings-section">
                    <label class="setting-label" data-i18n="marginLabel">Page Margin (mm)</label>
                    <input type="number" class="setting-input" id="pageMargin" value="10" min="0" max="50">
                </div>
                <div class="settings-section">
                    <label class="setting-label" data-i18n="fileNameLabel">File Name</label>
                    <input type="text" class="setting-input" id="fileName" value="merged" data-i18n-placeholder="fileNamePlaceholder" placeholder="Enter file name">
                </div>
            </div>

            <div class="settings-actions">
                <div class="stats">
                    <div class="stat-item">
                        <div class="stat-value" id="imageCount">0</div>
                        <div class="stat-label" data-i18n="statImages">Images</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="totalSize">0</div>
                        <div class="stat-label" data-i18n="statSize">Size (MB)</div>
                    </div>
                </div>
                <button class="generate-btn" id="generateBtn" disabled>
                    ğŸ“„ <span data-i18n="generateBtn">Generate PDF</span>
                </button>
                <button class="clear-btn" id="clearBtn" data-i18n="clearBtn">ğŸ—‘ï¸ Clear All Images</button>
            </div>
            <div class="progress-bar" id="progressBar">
                <div class="progress-fill" id="progressFill"></div>
            </div>

            <div class="settings-divider"></div>

            <h3 class="card-title" data-i18n="usageTitle">ğŸ“– How to Use</h3>
            <ul class="usage-list">
                <li>
                    <span class="usage-step">1</span>
                    <span data-i18n="usageStep1">Upload images: click to select, drag and drop, paste screenshot, or scan QR code</span>
                </li>
                <li>
                    <span class="usage-step">2</span>
                    <span data-i18n="usageStep2">Drag images to adjust order for correct PDF page sequence</span>
                </li>
                <li>
                    <span class="usage-step">3</span>
                    <span data-i18n="usageStep3">Configure page size, orientation and quality settings</span>
                </li>
                <li>
                    <span class="usage-step">4</span>
                    <span data-i18n="usageStep4">Click "Generate PDF" button to download locally</span>
                </li>
            </ul>
        </div>

        <!-- FAQ -->
        <section class="faq-section">
            <h3 data-i18n="faqTitle">FAQ</h3>
            <div class="faq-item">
                <div class="faq-question" data-i18n="faq1Question">What image formats are supported?</div>
                <div class="faq-answer"><p data-i18n="faq1Answer">Supports JPG, PNG, WebP, GIF, BMP and other common image formats.</p></div>
            </div>
            <div class="faq-item">
                <div class="faq-question" data-i18n="faq2Question">How many images can I merge at once?</div>
                <div class="faq-answer"><p data-i18n="faq2Answer">Theoretically unlimited, depends on browser memory. Recommended not to exceed 100 images per conversion.</p></div>
            </div>
            <div class="faq-item">
                <div class="faq-question" data-i18n="faq3Question">Can I reorder the images?</div>
                <div class="faq-answer"><p data-i18n="faq3Answer">Yes, after uploading, simply drag image thumbnails to adjust the page order in the PDF.</p></div>
            </div>
            <div class="faq-item">
                <div class="faq-question" data-i18n="faq4Question">What page sizes are supported?</div>
                <div class="faq-answer"><p data-i18n="faq4Answer">Supports A4, A3, A5, Letter, Legal and other common sizes, plus fit-to-image mode.</p></div>
            </div>
            <div class="faq-item">
                <div class="faq-question" data-i18n="faq5Question">Are my images uploaded to a server?</div>
                <div class="faq-answer"><p data-i18n="faq5Answer">No, the conversion is done locally in your browser using jsPDF library. Your images never leave your device.</p></div>
            </div>
            <div class="faq-item">
                <div class="faq-question" data-i18n="faq_free_q">Is this tool really free with no ads?</div>
                <div class="faq-answer"><p data-i18n="faq_free_a">Yes, 100% free with no ads, no registration, no watermark, and no usage limits. All processing happens locally in your browser â€” your data is never uploaded to any server.</p></div>
            </div>
        </section>

        <!-- ç›¸å…³å·¥å…· -->
        <section class="related-tools">
            <h3 data-i18n="relatedToolsTitle">Related Tools</h3>
            <div class="related-grid">
                <a href="pdf-merge.html" class="related-card">
                    <div class="related-icon">ğŸ“‘</div>
                    <h4 data-i18n="relatedTool1">PDF Merge</h4>
                    <p data-i18n="relatedTool1Desc">Merge multiple PDFs into one</p>
                </a>
                <a href="pdf-split.html" class="related-card">
                    <div class="related-icon">âœ‚ï¸</div>
                    <h4 data-i18n="relatedTool2">PDF Split</h4>
                    <p data-i18n="relatedTool2Desc">Split PDF into multiple files</p>
                </a>
                <a href="pdf-compress.html" class="related-card">
                    <div class="related-icon">ğŸ—œï¸</div>
                    <h4 data-i18n="relatedTool3">PDF Compress</h4>
                    <p data-i18n="relatedTool3Desc">Reduce PDF file size</p>
                </a>
                <a href="image-compressor.html" class="related-card">
                    <div class="related-icon">ğŸ–¼ï¸</div>
                    <h4 data-i18n="relatedTool4">Image Compressor</h4>
                    <p data-i18n="relatedTool4Desc">Batch compress image files</p>
                </a>
            </div>
        </section>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast"></div>

    <!-- ===================== LOGIC ===================== -->
    <script>
    (function() {
        'use strict';

        // ===== i18n å¤šè¯­è¨€æ”¯æŒ =====
        const i18n = {
            'en': {
                tool_name: 'Image to PDF',
                pageTitle: 'ğŸ“„ Image to PDF Converter',
                pageSubtitle: 'Merge multiple images into PDF with drag-and-drop sorting, clipboard paste, QR code upload',
                featureBatchTitle: '100% Free & Private',
                featureBatchDesc: 'No ads, no signup, no watermark. Everything runs locally in your browser. Your data never leaves your device.',
                featureOrderTitle: 'Reorder',
                featureOrderDesc: 'Drag and drop to reorder images, customize PDF page sequence',
                featurePageTitle: 'Page Settings',
                featurePageDesc: 'Supports A4, Letter and more page sizes with orientation options',
                featureInstantTitle: 'Instant Generate',
                featureInstantDesc: 'Convert locally in browser, download instantly without waiting',
                uploadTitle: 'ğŸ“¤ Upload Images',
                uploadText: 'Click to select images or drag and drop here',
                uploadHint: 'Supports JPG / PNG / WEBP / GIF / BMP formats<br>Paste screenshot: <kbd>Ctrl</kbd> + <kbd>V</kbd> (Mac: <kbd>âŒ˜</kbd> + <kbd>V</kbd>)',
                selectFiles: 'Select Files',
                selectFolder: 'Select Folder',
                imageListTitle: 'Image List',
                imageListHint: '(Drag to reorder)',
                imageListEmpty: 'No images, please upload images',
                qrcodeTitle: 'ğŸ“± Scan to Upload from Phone',
                qrcodeHint: 'Scan QR code to open this tool<br>Select images directly on your phone',
                settingsTitle: 'âš™ï¸ PDF Settings',
                pageSizeLabel: 'Page Size',
                pageSizeA4: 'A4 (210 Ã— 297 mm)',
                pageSizeA3: 'A3 (297 Ã— 420 mm)',
                pageSizeA5: 'A5 (148 Ã— 210 mm)',
                pageSizeLetter: 'Letter (216 Ã— 279 mm)',
                pageSizeFit: 'Fit to Image Size',
                orientationLabel: 'Page Orientation',
                orientationAuto: 'Auto Detect',
                orientationPortrait: 'Portrait',
                orientationLandscape: 'Landscape',
                qualityLabel: 'Image Quality',
                qualityHighest: 'Highest Quality',
                qualityHigh: 'High Quality (Recommended)',
                qualityMedium: 'Medium Quality',
                qualityLow: 'Low Quality (Smaller File)',
                marginLabel: 'Page Margin (mm)',
                fileNameLabel: 'File Name',
                fileNamePlaceholder: 'Enter file name',
                statImages: 'Images',
                statSize: 'Size (MB)',
                generateBtn: 'Generate PDF',
                generatingBtn: 'â³ Generating...',
                clearBtn: 'ğŸ—‘ï¸ Clear All Images',
                usageTitle: 'ğŸ“– How to Use',
                usageStep1: 'Upload images: click to select, drag and drop, paste screenshot, or scan QR code',
                usageStep2: 'Drag images to adjust order for correct PDF page sequence',
                usageStep3: 'Configure page size, orientation and quality settings',
                usageStep4: 'Click "Generate PDF" button to download locally',
                faqTitle: 'â“ FAQ',
                faq1Question: 'What image formats are supported?',
                faq1Answer: 'Supports JPG, PNG, WebP, GIF, BMP and other common image formats.',
                faq2Question: 'How many images can I merge at once?',
                faq2Answer: 'Theoretically unlimited, depends on browser memory. Recommended not to exceed 100 images per conversion.',
                faq3Question: 'Can I reorder the images?',
                faq3Answer: 'Yes, after uploading, simply drag image thumbnails to adjust the page order in the PDF.',
                faq4Question: 'What page sizes are supported?',
                faq4Answer: 'Supports A4, A3, A5, Letter, Legal and other common sizes, plus fit-to-image mode.',
                faq5Question: 'Are my images uploaded to a server?',
                faq5Answer: 'No, the conversion is done locally in your browser using jsPDF library. Your images never leave your device.',
                relatedToolsTitle: 'Related Tools',
                relatedTool1: 'PDF Merge',
                relatedTool1Desc: 'Merge multiple PDFs into one',
                relatedTool2: 'PDF Split',
                relatedTool2Desc: 'Split PDF into multiple files',
                relatedTool3: 'PDF Compress',
                relatedTool3Desc: 'Reduce PDF file size',
                relatedTool4: 'Image Compressor',
                relatedTool4Desc: 'Batch compress image files',
                toastPasted: 'Pasted {count} image(s)',
                toastAdded: 'Added {count} image(s)',
                toastCleared: 'All images cleared',
                toastSelectImage: 'Please select image files',
                toastAddFirst: 'Please add images first',
                toastSuccess: 'PDF generated successfully!',
                toastError: 'Failed to generate PDF: ',
                confirmClear: 'Are you sure to clear all images?',
                faq_free_q: 'Is this tool really free with no ads?',
                faq_free_a: 'Yes, 100% free with no ads, no registration, no watermark, and no usage limits. All processing happens locally in your browser â€” your data is never uploaded to any server.',
                trust_users: 'ğŸŒ Used by 50,000+ users',
                trust_rating: 'â­ 4.9/5 rating',
                trust_privacy: 'ğŸ”’ 100% Private',
                trust_free: 'ğŸš« No Ads, No Signup'
            },
            'zh-CN': {
                tool_name: 'å›¾ç‰‡è½¬PDF',
                pageTitle: 'ğŸ“„ å›¾ç‰‡åˆå¹¶ä¸ºPDF',
                pageSubtitle: 'å¤šå›¾æ‹–æ‹½æ’åºã€æˆªå›¾ç²˜è´´ã€æ‰‹æœºæ‰«ç ä¸Šä¼ ï¼Œä¸€é”®ç”Ÿæˆé«˜è´¨é‡PDF',
                featureBatchTitle: '100% å…è´¹ä¸”å®‰å…¨',
                featureBatchDesc: 'æ— å¹¿å‘Šã€æ— éœ€æ³¨å†Œã€æ— æ°´å°ã€‚æ‰€æœ‰å¤„ç†éƒ½åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆï¼Œæ•°æ®ä¸ä¼šä¸Šä¼ åˆ°ä»»ä½•æœåŠ¡å™¨ã€‚',
                featureOrderTitle: 'é¡ºåºè°ƒæ•´',
                featureOrderDesc: 'å¯æ‹–æ‹½æ’åºå›¾ç‰‡ï¼Œè‡ªå®šä¹‰ PDF é¡µé¢é¡ºåº',
                featurePageTitle: 'é¡µé¢è®¾ç½®',
                featurePageDesc: 'æ”¯æŒ A4ã€Letter ç­‰çº¸å¼ å¤§å°å’Œæ¨ªç«–æ–¹å‘é€‰æ‹©',
                featureInstantTitle: 'å³æ—¶ç”Ÿæˆ',
                featureInstantDesc: 'æœ¬åœ°æµè§ˆå™¨å®Œæˆè½¬æ¢ï¼Œå³åˆ»ä¸‹è½½æ— éœ€ç­‰å¾…',
                uploadTitle: 'ğŸ“¤ ä¸Šä¼ å›¾ç‰‡',
                uploadText: 'ç‚¹å‡»é€‰æ‹©å›¾ç‰‡ æˆ– æ‹–æ‹½å›¾ç‰‡åˆ°æ­¤å¤„',
                uploadHint: 'æ”¯æŒ JPG / PNG / WEBP / GIF / BMP æ ¼å¼<br>æˆªå›¾ç²˜è´´ï¼š<kbd>Ctrl</kbd> + <kbd>V</kbd> (Mac: <kbd>âŒ˜</kbd> + <kbd>V</kbd>)',
                selectFiles: 'é€‰æ‹©æ–‡ä»¶',
                selectFolder: 'é€‰æ‹©æ–‡ä»¶å¤¹',
                imageListTitle: 'å›¾ç‰‡åˆ—è¡¨',
                imageListHint: '(æ‹–æ‹½å¯è°ƒæ•´é¡ºåº)',
                imageListEmpty: 'æš‚æ— å›¾ç‰‡ï¼Œè¯·ä¸Šä¼ å›¾ç‰‡',
                qrcodeTitle: 'ğŸ“± æ‰‹æœºæ‰«ç ä¸Šä¼ ',
                qrcodeHint: 'æ‰‹æœºæ‰«ç æ‰“å¼€æœ¬å·¥å…·<br>ç›´æ¥åœ¨æ‰‹æœºä¸Šé€‰æ‹©å›¾ç‰‡',
                settingsTitle: 'âš™ï¸ PDF è®¾ç½®',
                pageSizeLabel: 'é¡µé¢å°ºå¯¸',
                pageSizeA4: 'A4 (210 Ã— 297 mm)',
                pageSizeA3: 'A3 (297 Ã— 420 mm)',
                pageSizeA5: 'A5 (148 Ã— 210 mm)',
                pageSizeLetter: 'Letter (216 Ã— 279 mm)',
                pageSizeFit: 'è‡ªé€‚åº”å›¾ç‰‡å°ºå¯¸',
                orientationLabel: 'é¡µé¢æ–¹å‘',
                orientationAuto: 'è‡ªåŠ¨åˆ¤æ–­',
                orientationPortrait: 'çºµå‘',
                orientationLandscape: 'æ¨ªå‘',
                qualityLabel: 'å›¾ç‰‡è´¨é‡',
                qualityHighest: 'æœ€é«˜è´¨é‡',
                qualityHigh: 'é«˜è´¨é‡ (æ¨è)',
                qualityMedium: 'ä¸­ç­‰è´¨é‡',
                qualityLow: 'ä½è´¨é‡ (æ–‡ä»¶æ›´å°)',
                marginLabel: 'é¡µè¾¹è· (mm)',
                fileNameLabel: 'æ–‡ä»¶å',
                fileNamePlaceholder: 'è¾“å…¥æ–‡ä»¶å',
                statImages: 'å›¾ç‰‡æ•°é‡',
                statSize: 'æ€»å¤§å° (MB)',
                generateBtn: 'ç”Ÿæˆ PDF',
                generatingBtn: 'â³ ç”Ÿæˆä¸­...',
                clearBtn: 'ğŸ—‘ï¸ æ¸…ç©ºæ‰€æœ‰å›¾ç‰‡',
                usageTitle: 'ğŸ“– ä½¿ç”¨è¯´æ˜',
                usageStep1: 'ä¸Šä¼ å›¾ç‰‡ï¼šç‚¹å‡»é€‰æ‹©ã€æ‹–æ‹½ä¸Šä¼ ã€ç²˜è´´æˆªå›¾æˆ–æ‰‹æœºæ‰«ç ',
                usageStep2: 'æ‹–æ‹½å›¾ç‰‡è°ƒæ•´é¡ºåºï¼Œç¡®ä¿PDFé¡µé¢æ’åˆ—æ­£ç¡®',
                usageStep3: 'è®¾ç½®é¡µé¢å°ºå¯¸ã€æ–¹å‘å’Œè´¨é‡ç­‰å‚æ•°',
                usageStep4: 'ç‚¹å‡»"ç”ŸæˆPDF"æŒ‰é’®ï¼Œè‡ªåŠ¨ä¸‹è½½åˆ°æœ¬åœ°',
                faqTitle: 'â“ å¸¸è§é—®é¢˜',
                faq1Question: 'æ”¯æŒå“ªäº›å›¾ç‰‡æ ¼å¼ï¼Ÿ',
                faq1Answer: 'æ”¯æŒ JPGã€PNGã€WebPã€GIFã€BMP ç­‰å¸¸è§å›¾ç‰‡æ ¼å¼ï¼Œæ»¡è¶³æ—¥å¸¸ä½¿ç”¨éœ€æ±‚ã€‚',
                faq2Question: 'æœ€å¤šå¯ä»¥åˆå¹¶å¤šå°‘å¼ å›¾ç‰‡ï¼Ÿ',
                faq2Answer: 'ç†è®ºä¸Šæ— é™åˆ¶ï¼Œå–å†³äºæµè§ˆå™¨å†…å­˜å¤§å°ã€‚ä¸ºä¿è¯è½¬æ¢é¡ºç•…ï¼Œå»ºè®®å•æ¬¡ä¸è¶…è¿‡100å¼ å›¾ç‰‡ã€‚',
                faq3Question: 'å¯ä»¥è°ƒæ•´å›¾ç‰‡é¡ºåºå—ï¼Ÿ',
                faq3Answer: 'å¯ä»¥ï¼Œä¸Šä¼ å›¾ç‰‡åç›´æ¥æ‹–æ‹½å›¾ç‰‡ç¼©ç•¥å›¾å³å¯è°ƒæ•´åœ¨ PDF ä¸­çš„é¡µé¢é¡ºåºï¼Œéå¸¸æ–¹ä¾¿ã€‚',
                faq4Question: 'æ”¯æŒå“ªäº›çº¸å¼ å¤§å°ï¼Ÿ',
                faq4Answer: 'æ”¯æŒ A4ã€A3ã€A5ã€Letterã€Legal ç­‰å¸¸ç”¨çº¸å¼ å¤§å°ï¼Œè¿˜å¯ä»¥é€‰æ‹©è‡ªé€‚åº”å›¾ç‰‡å°ºå¯¸æ¨¡å¼ã€‚',
                faq5Question: 'å›¾ç‰‡ä¼šä¸Šä¼ åˆ°æœåŠ¡å™¨å—ï¼Ÿ',
                faq5Answer: 'ä¸ä¼šï¼Œæœ¬å·¥å…·ä½¿ç”¨ jsPDF åº“åœ¨æœ¬åœ°æµè§ˆå™¨å®Œæˆè½¬æ¢ï¼Œå›¾ç‰‡æ•°æ®å®Œå…¨ä¿ç•™åœ¨æ‚¨çš„è®¾å¤‡ä¸Šï¼Œå®‰å…¨å¯é ã€‚',
                relatedToolsTitle: 'ç›¸å…³å·¥å…·',
                relatedTool1: 'PDF åˆå¹¶',
                relatedTool1Desc: 'å°†å¤šä¸ª PDF åˆå¹¶ä¸ºä¸€ä¸ª',
                relatedTool2: 'PDF æ‹†åˆ†',
                relatedTool2Desc: 'å°† PDF æ‹†åˆ†ä¸ºå¤šä¸ªæ–‡ä»¶',
                relatedTool3: 'PDF å‹ç¼©',
                relatedTool3Desc: 'å‡å° PDF æ–‡ä»¶å¤§å°',
                relatedTool4: 'å›¾ç‰‡å‹ç¼©',
                relatedTool4Desc: 'æ‰¹é‡å‹ç¼©å›¾ç‰‡æ–‡ä»¶',
                toastPasted: 'å·²ç²˜è´´ {count} å¼ å›¾ç‰‡',
                toastAdded: 'å·²æ·»åŠ  {count} å¼ å›¾ç‰‡',
                toastCleared: 'å·²æ¸…ç©ºæ‰€æœ‰å›¾ç‰‡',
                toastSelectImage: 'è¯·é€‰æ‹©å›¾ç‰‡æ–‡ä»¶',
                toastAddFirst: 'è¯·å…ˆæ·»åŠ å›¾ç‰‡',
                toastSuccess: 'PDF ç”ŸæˆæˆåŠŸï¼',
                toastError: 'ç”Ÿæˆ PDF å¤±è´¥: ',
                confirmClear: 'ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å›¾ç‰‡å—ï¼Ÿ',
                faq_free_q: 'è¿™ä¸ªå·¥å…·çœŸçš„å®Œå…¨å…è´¹æ— å¹¿å‘Šå—ï¼Ÿ',
                faq_free_a: 'æ˜¯çš„ï¼Œ100% å…è´¹ï¼Œæ— å¹¿å‘Šã€æ— éœ€æ³¨å†Œã€æ— æ°´å°ã€æ— ä½¿ç”¨é™åˆ¶ã€‚æ‰€æœ‰å¤„ç†éƒ½åœ¨æµè§ˆå™¨æœ¬åœ°å®Œæˆã€‚',
                trust_users: 'ğŸŒ è¶…è¿‡ 50,000 ç”¨æˆ·ä½¿ç”¨',
                trust_rating: 'â­ 4.9/5 å¥½è¯„',
                trust_privacy: 'ğŸ”’ 100% éšç§å®‰å…¨',
                trust_free: 'ğŸš« æ— å¹¿å‘Šã€æ— éœ€æ³¨å†Œ'
            },
            'fr': {
                tool_name: 'Image en PDF',
                pageTitle: 'ğŸ“„ Convertisseur Image en PDF',
                pageSubtitle: 'Fusionnez plusieurs images en PDF avec tri par glisser-dÃ©poser, collage du presse-papiers, tÃ©lÃ©chargement QR code',
                featureBatchTitle: '100% Gratuit et PrivÃ©',
                featureBatchDesc: 'Sans publicitÃ©, sans inscription, sans filigrane. Tout est traitÃ© localement dans votre navigateur.',
                featureOrderTitle: 'RÃ©organiser',
                featureOrderDesc: 'Glissez et dÃ©posez pour rÃ©organiser les images, personnalisez l\'ordre des pages PDF',
                featurePageTitle: 'ParamÃ¨tres de page',
                featurePageDesc: 'Prend en charge A4, Letter et plus de tailles avec options d\'orientation',
                featureInstantTitle: 'GÃ©nÃ©ration instantanÃ©e',
                featureInstantDesc: 'Conversion locale dans le navigateur, tÃ©lÃ©chargement instantanÃ© sans attente',
                uploadTitle: 'ğŸ“¤ TÃ©lÃ©charger des images',
                uploadText: 'Cliquez pour sÃ©lectionner des images ou glissez-dÃ©posez ici',
                uploadHint: 'Formats supportÃ©s: JPG / PNG / WEBP / GIF / BMP<br>Coller une capture: <kbd>Ctrl</kbd> + <kbd>V</kbd> (Mac: <kbd>âŒ˜</kbd> + <kbd>V</kbd>)',
                selectFiles: 'SÃ©lectionner fichiers',
                selectFolder: 'SÃ©lectionner dossier',
                imageListTitle: 'Liste des images',
                imageListHint: '(Glissez pour rÃ©organiser)',
                imageListEmpty: 'Aucune image, veuillez tÃ©lÃ©charger des images',
                qrcodeTitle: 'ğŸ“± Scannez pour tÃ©lÃ©charger depuis le tÃ©lÃ©phone',
                qrcodeHint: 'Scannez le QR code pour ouvrir cet outil<br>SÃ©lectionnez des images directement sur votre tÃ©lÃ©phone',
                settingsTitle: 'âš™ï¸ ParamÃ¨tres PDF',
                pageSizeLabel: 'Taille de page',
                pageSizeA4: 'A4 (210 Ã— 297 mm)',
                pageSizeA3: 'A3 (297 Ã— 420 mm)',
                pageSizeA5: 'A5 (148 Ã— 210 mm)',
                pageSizeLetter: 'Letter (216 Ã— 279 mm)',
                pageSizeFit: 'Adapter Ã  la taille de l\'image',
                orientationLabel: 'Orientation de la page',
                orientationAuto: 'DÃ©tection automatique',
                orientationPortrait: 'Portrait',
                orientationLandscape: 'Paysage',
                qualityLabel: 'QualitÃ© d\'image',
                qualityHighest: 'QualitÃ© maximale',
                qualityHigh: 'Haute qualitÃ© (RecommandÃ©)',
                qualityMedium: 'QualitÃ© moyenne',
                qualityLow: 'Basse qualitÃ© (Fichier plus petit)',
                marginLabel: 'Marge de page (mm)',
                fileNameLabel: 'Nom du fichier',
                fileNamePlaceholder: 'Entrez le nom du fichier',
                statImages: 'Images',
                statSize: 'Taille (Mo)',
                generateBtn: 'GÃ©nÃ©rer PDF',
                generatingBtn: 'â³ GÃ©nÃ©ration...',
                clearBtn: 'ğŸ—‘ï¸ Effacer toutes les images',
                usageTitle: 'ğŸ“– Mode d\'emploi',
                usageStep1: 'TÃ©lÃ©chargez des images: cliquez, glissez-dÃ©posez, collez une capture ou scannez le QR code',
                usageStep2: 'Glissez les images pour ajuster l\'ordre des pages PDF',
                usageStep3: 'Configurez la taille de page, l\'orientation et les paramÃ¨tres de qualitÃ©',
                usageStep4: 'Cliquez sur "GÃ©nÃ©rer PDF" pour tÃ©lÃ©charger localement',
                faqTitle: 'â“ FAQ',
                faq1Question: 'Quels formats d\'image sont supportÃ©s?',
                faq1Answer: 'Prend en charge JPG, PNG, WebP, GIF, BMP et autres formats d\'image courants.',
                faq2Question: 'Combien d\'images puis-je fusionner Ã  la fois?',
                faq2Answer: 'ThÃ©oriquement illimitÃ©, dÃ©pend de la mÃ©moire du navigateur. RecommandÃ© de ne pas dÃ©passer 100 images par conversion.',
                faq3Question: 'Puis-je rÃ©organiser les images?',
                faq3Answer: 'Oui, aprÃ¨s le tÃ©lÃ©chargement, faites simplement glisser les vignettes pour ajuster l\'ordre des pages dans le PDF.',
                faq4Question: 'Quelles tailles de page sont supportÃ©es?',
                faq4Answer: 'Prend en charge A4, A3, A5, Letter, Legal et d\'autres tailles courantes, plus le mode adaptatif.',
                faq5Question: 'Mes images sont-elles tÃ©lÃ©chargÃ©es sur un serveur?',
                faq5Answer: 'Non, la conversion se fait localement dans votre navigateur avec la bibliothÃ¨que jsPDF. Vos images ne quittent jamais votre appareil.',
                relatedToolsTitle: 'Outils associÃ©s',
                relatedTool1: 'Fusion PDF',
                relatedTool1Desc: 'Fusionner plusieurs PDF en un',
                relatedTool2: 'Division PDF',
                relatedTool2Desc: 'Diviser un PDF en plusieurs fichiers',
                relatedTool3: 'Compression PDF',
                relatedTool3Desc: 'RÃ©duire la taille du fichier PDF',
                relatedTool4: 'Compresseur d\'images',
                relatedTool4Desc: 'Compresser des images par lots',
                toastPasted: '{count} image(s) collÃ©e(s)',
                toastAdded: '{count} image(s) ajoutÃ©e(s)',
                toastCleared: 'Toutes les images effacÃ©es',
                toastSelectImage: 'Veuillez sÃ©lectionner des fichiers image',
                toastAddFirst: 'Veuillez d\'abord ajouter des images',
                toastSuccess: 'PDF gÃ©nÃ©rÃ© avec succÃ¨s!',
                toastError: 'Ã‰chec de la gÃ©nÃ©ration du PDF: ',
                confirmClear: 'ÃŠtes-vous sÃ»r de vouloir effacer toutes les images?',
                faq_free_q: 'Cet outil est-il vraiment gratuit sans publicitÃ© ?',
                faq_free_a: 'Oui, 100% gratuit sans publicitÃ©, sans inscription, sans filigrane et sans limite d\'utilisation.',
                trust_users: 'ğŸŒ UtilisÃ© par 50 000+ utilisateurs',
                trust_rating: 'â­ Note 4.9/5',
                trust_privacy: 'ğŸ”’ 100% PrivÃ©',
                trust_free: 'ğŸš« Sans pub, sans inscription'
            },
            'es': {
                tool_name: 'Imagen a PDF',
                pageTitle: 'ğŸ“„ Convertidor de Imagen a PDF',
                pageSubtitle: 'Fusiona mÃºltiples imÃ¡genes en PDF con arrastrar y soltar, pegar del portapapeles, carga por QR',
                featureBatchTitle: '100% Gratis y Privado',
                featureBatchDesc: 'Sin anuncios, sin registro, sin marca de agua. Todo se procesa localmente en tu navegador.',
                featureOrderTitle: 'Reordenar',
                featureOrderDesc: 'Arrastra y suelta para reordenar imÃ¡genes, personaliza la secuencia de pÃ¡ginas PDF',
                featurePageTitle: 'ConfiguraciÃ³n de pÃ¡gina',
                featurePageDesc: 'Soporta A4, Letter y mÃ¡s tamaÃ±os con opciones de orientaciÃ³n',
                featureInstantTitle: 'GeneraciÃ³n instantÃ¡nea',
                featureInstantDesc: 'ConversiÃ³n local en el navegador, descarga instantÃ¡nea sin esperas',
                uploadTitle: 'ğŸ“¤ Subir imÃ¡genes',
                uploadText: 'Haz clic para seleccionar imÃ¡genes o arrastra y suelta aquÃ­',
                uploadHint: 'Soporta formatos JPG / PNG / WEBP / GIF / BMP<br>Pegar captura: <kbd>Ctrl</kbd> + <kbd>V</kbd> (Mac: <kbd>âŒ˜</kbd> + <kbd>V</kbd>)',
                selectFiles: 'Seleccionar archivos',
                selectFolder: 'Seleccionar carpeta',
                imageListTitle: 'Lista de imÃ¡genes',
                imageListHint: '(Arrastra para reordenar)',
                imageListEmpty: 'Sin imÃ¡genes, por favor sube imÃ¡genes',
                qrcodeTitle: 'ğŸ“± Escanea para subir desde el telÃ©fono',
                qrcodeHint: 'Escanea el cÃ³digo QR para abrir esta herramienta<br>Selecciona imÃ¡genes directamente en tu telÃ©fono',
                settingsTitle: 'âš™ï¸ ConfiguraciÃ³n PDF',
                pageSizeLabel: 'TamaÃ±o de pÃ¡gina',
                pageSizeA4: 'A4 (210 Ã— 297 mm)',
                pageSizeA3: 'A3 (297 Ã— 420 mm)',
                pageSizeA5: 'A5 (148 Ã— 210 mm)',
                pageSizeLetter: 'Letter (216 Ã— 279 mm)',
                pageSizeFit: 'Ajustar al tamaÃ±o de imagen',
                orientationLabel: 'OrientaciÃ³n de pÃ¡gina',
                orientationAuto: 'DetecciÃ³n automÃ¡tica',
                orientationPortrait: 'Vertical',
                orientationLandscape: 'Horizontal',
                qualityLabel: 'Calidad de imagen',
                qualityHighest: 'MÃ¡xima calidad',
                qualityHigh: 'Alta calidad (Recomendado)',
                qualityMedium: 'Calidad media',
                qualityLow: 'Baja calidad (Archivo mÃ¡s pequeÃ±o)',
                marginLabel: 'Margen de pÃ¡gina (mm)',
                fileNameLabel: 'Nombre del archivo',
                fileNamePlaceholder: 'Ingresa el nombre del archivo',
                statImages: 'ImÃ¡genes',
                statSize: 'TamaÃ±o (MB)',
                generateBtn: 'Generar PDF',
                generatingBtn: 'â³ Generando...',
                clearBtn: 'ğŸ—‘ï¸ Borrar todas las imÃ¡genes',
                usageTitle: 'ğŸ“– CÃ³mo usar',
                usageStep1: 'Sube imÃ¡genes: haz clic, arrastra y suelta, pega captura o escanea cÃ³digo QR',
                usageStep2: 'Arrastra las imÃ¡genes para ajustar el orden de las pÃ¡ginas PDF',
                usageStep3: 'Configura el tamaÃ±o de pÃ¡gina, orientaciÃ³n y calidad',
                usageStep4: 'Haz clic en "Generar PDF" para descargar localmente',
                faqTitle: 'â“ Preguntas frecuentes',
                faq1Question: 'Â¿QuÃ© formatos de imagen son compatibles?',
                faq1Answer: 'Soporta JPG, PNG, WebP, GIF, BMP y otros formatos de imagen comunes.',
                faq2Question: 'Â¿CuÃ¡ntas imÃ¡genes puedo fusionar a la vez?',
                faq2Answer: 'TeÃ³ricamente ilimitado, depende de la memoria del navegador. Se recomienda no exceder 100 imÃ¡genes por conversiÃ³n.',
                faq3Question: 'Â¿Puedo reordenar las imÃ¡genes?',
                faq3Answer: 'SÃ­, despuÃ©s de subir, simplemente arrastra las miniaturas para ajustar el orden de las pÃ¡ginas en el PDF.',
                faq4Question: 'Â¿QuÃ© tamaÃ±os de pÃ¡gina son compatibles?',
                faq4Answer: 'Soporta A4, A3, A5, Letter, Legal y otros tamaÃ±os comunes, ademÃ¡s del modo adaptativo.',
                faq5Question: 'Â¿Mis imÃ¡genes se suben a un servidor?',
                faq5Answer: 'No, la conversiÃ³n se realiza localmente en tu navegador usando la biblioteca jsPDF. Tus imÃ¡genes nunca salen de tu dispositivo.',
                relatedToolsTitle: 'Herramientas relacionadas',
                relatedTool1: 'Fusionar PDF',
                relatedTool1Desc: 'Fusionar varios PDF en uno',
                relatedTool2: 'Dividir PDF',
                relatedTool2Desc: 'Dividir PDF en varios archivos',
                relatedTool3: 'Comprimir PDF',
                relatedTool3Desc: 'Reducir el tamaÃ±o del archivo PDF',
                relatedTool4: 'Compresor de imÃ¡genes',
                relatedTool4Desc: 'Comprimir imÃ¡genes por lotes',
                toastPasted: '{count} imagen(es) pegada(s)',
                toastAdded: '{count} imagen(es) aÃ±adida(s)',
                toastCleared: 'Todas las imÃ¡genes borradas',
                toastSelectImage: 'Por favor selecciona archivos de imagen',
                toastAddFirst: 'Por favor aÃ±ade imÃ¡genes primero',
                toastSuccess: 'Â¡PDF generado con Ã©xito!',
                toastError: 'Error al generar PDF: ',
                confirmClear: 'Â¿EstÃ¡s seguro de borrar todas las imÃ¡genes?',
                faq_free_q: 'Â¿Esta herramienta es realmente gratuita sin anuncios?',
                faq_free_a: 'SÃ­, 100% gratuita sin anuncios, sin registro, sin marca de agua y sin lÃ­mites de uso.',
                trust_users: 'ğŸŒ Usado por mÃ¡s de 50,000 usuarios',
                trust_rating: 'â­ CalificaciÃ³n 4.9/5',
                trust_privacy: 'ğŸ”’ 100% Privado',
                trust_free: 'ğŸš« Sin anuncios, sin registro'
            }
        };

        // è·å–å½“å‰è¯­è¨€
        function getLang() {
            return (typeof WebToolbox !== 'undefined') ? WebToolbox.getCurrentLang() : (localStorage.getItem('toolbox_lang') || 'en');
        }

        function t(key) {
            return i18n[getLang()]?.[key] || i18n['en'][key] || key;
        }

        // ===== å…¨å±€å˜é‡ =====
        let images = []; // å­˜å‚¨å›¾ç‰‡æ•°æ® { id, file, dataUrl, name }
        let sortable = null;

        // ===== DOM å…ƒç´  =====
        const uploadZone = document.getElementById('uploadZone');
        const fileInput = document.getElementById('fileInput');
        const folderInput = document.getElementById('folderInput');
        const imageList = document.getElementById('imageList');
        const generateBtn = document.getElementById('generateBtn');
        const clearBtn = document.getElementById('clearBtn');
        const progressBar = document.getElementById('progressBar');
        const progressFill = document.getElementById('progressFill');
        const imageCountEl = document.getElementById('imageCount');
        const totalSizeEl = document.getElementById('totalSize');
        const toast = document.getElementById('toast');

        // ===== åˆå§‹åŒ– =====
        function init() {
            initQRCode();
            initEventListeners();
            initSortable();
        }

        // ç”ŸæˆäºŒç»´ç 
        function initQRCode() {
            const qrcodeContainer = document.getElementById('qrcode');
            if (qrcodeContainer && typeof QRCode !== 'undefined') {
                new QRCode(qrcodeContainer, {
                    text: window.location.href,
                    width: 120,
                    height: 120,
                    colorDark: '#1a1a2e',
                    colorLight: '#ffffff',
                    correctLevel: QRCode.CorrectLevel.M
                });
            }
        }

        // åˆå§‹åŒ–äº‹ä»¶ç›‘å¬
        function initEventListeners() {
            // ç‚¹å‡»ä¸Šä¼ åŒºåŸŸ
            uploadZone.addEventListener('click', () => fileInput.click());

            // æ–‡ä»¶é€‰æ‹©
            fileInput.addEventListener('change', handleFileSelect);
            folderInput.addEventListener('change', handleFileSelect);

            // å¿«æ·æŒ‰é’®
            document.getElementById('btnSelectFiles').addEventListener('click', (e) => {
                e.stopPropagation();
                fileInput.click();
            });
            document.getElementById('btnSelectFolder').addEventListener('click', (e) => {
                e.stopPropagation();
                folderInput.click();
            });

            // æ‹–æ‹½ä¸Šä¼ 
            uploadZone.addEventListener('dragover', handleDragOver);
            uploadZone.addEventListener('dragleave', handleDragLeave);
            uploadZone.addEventListener('drop', handleDrop);

            // å…¨å±€æ‹–æ‹½ï¼ˆé˜²æ­¢æµè§ˆå™¨æ‰“å¼€æ–‡ä»¶ï¼‰
            document.addEventListener('dragover', (e) => e.preventDefault());
            document.addEventListener('drop', (e) => e.preventDefault());

            // ç²˜è´´ä¸Šä¼ 
            document.addEventListener('paste', handlePaste);

            // ç”Ÿæˆ PDF
            generateBtn.addEventListener('click', generatePDF);

            // æ¸…ç©º
            clearBtn.addEventListener('click', clearAllImages);
        }

        // åˆå§‹åŒ–æ‹–æ‹½æ’åº
        function initSortable() {
            sortable = new Sortable(imageList, {
                animation: 150,
                ghostClass: 'sortable-ghost',
                chosenClass: 'sortable-chosen',
                onEnd: function(evt) {
                    // æ›´æ–°æ•°ç»„é¡ºåº
                    const movedItem = images.splice(evt.oldIndex, 1)[0];
                    images.splice(evt.newIndex, 0, movedItem);
                    updateIndexNumbers();
                }
            });
        }

        // ===== æ–‡ä»¶å¤„ç† =====
        function handleFileSelect(e) {
            const files = Array.from(e.target.files);
            processFiles(files);
            e.target.value = ''; // æ¸…ç©ºä»¥ä¾¿é‡å¤é€‰æ‹©
        }

        function handleDragOver(e) {
            e.preventDefault();
            uploadZone.classList.add('dragover');
        }

        function handleDragLeave(e) {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
        }

        function handleDrop(e) {
            e.preventDefault();
            uploadZone.classList.remove('dragover');
            const files = Array.from(e.dataTransfer.files);
            processFiles(files);
        }

        function handlePaste(e) {
            const items = e.clipboardData?.items;
            if (!items) return;

            const imageFiles = [];
            for (const item of items) {
                if (item.type.startsWith('image/')) {
                    const file = item.getAsFile();
                    if (file) {
                        // ç”Ÿæˆæ–‡ä»¶å
                        const timestamp = new Date().toISOString().replace(/[:.]/g, '-').slice(0, 19);
                        const ext = file.type.split('/')[1] || 'png';
                        const namedFile = new File([file], `screenshot-${timestamp}.${ext}`, { type: file.type });
                        imageFiles.push(namedFile);
                    }
                }
            }

            if (imageFiles.length > 0) {
                processFiles(imageFiles);
                showToast(t('toastPasted').replace('{count}', imageFiles.length), 'success');
            }
        }

        // å¤„ç†æ–‡ä»¶
        async function processFiles(files) {
            // è¿‡æ»¤å›¾ç‰‡æ–‡ä»¶
            const imageFiles = files.filter(file => file.type.startsWith('image/'));

            if (imageFiles.length === 0) {
                showToast(t('toastSelectImage'), 'error');
                return;
            }

            // æŒ‰æ–‡ä»¶åæ’åº
            imageFiles.sort((a, b) => a.name.localeCompare(b.name, 'zh-CN', { numeric: true }));

            for (const file of imageFiles) {
                try {
                    const dataUrl = await readFileAsDataURL(file);
                    const imageData = {
                        id: Date.now() + Math.random().toString(36).substr(2, 9),
                        file: file,
                        dataUrl: dataUrl,
                        name: file.name
                    };
                    images.push(imageData);
                    addImageToList(imageData);
                } catch (err) {
                    console.error('è¯»å–æ–‡ä»¶å¤±è´¥:', err);
                }
            }

            updateStats();
            updateGenerateButton();
            showToast(t('toastAdded').replace('{count}', imageFiles.length), 'success');
        }

        function readFileAsDataURL(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.onload = () => resolve(reader.result);
                reader.onerror = reject;
                reader.readAsDataURL(file);
            });
        }

        // ===== UI æ“ä½œ =====
        function addImageToList(imageData) {
            const div = document.createElement('div');
            div.className = 'image-item';
            div.dataset.id = imageData.id;

            div.innerHTML = `
                <span class="image-index">${images.length}</span>
                <img src="${imageData.dataUrl}" alt="${imageData.name}">
                <button class="image-remove" title="åˆ é™¤">Ã—</button>
                <span class="image-name">${imageData.name}</span>
            `;

            // åˆ é™¤æŒ‰é’®
            div.querySelector('.image-remove').addEventListener('click', (e) => {
                e.stopPropagation();
                removeImage(imageData.id);
            });

            imageList.appendChild(div);
        }

        function removeImage(id) {
            images = images.filter(img => img.id !== id);
            const el = document.querySelector(`.image-item[data-id="${id}"]`);
            if (el) {
                el.style.transform = 'scale(0)';
                setTimeout(() => {
                    el.remove();
                    updateIndexNumbers();
                    updateStats();
                    updateGenerateButton();
                }, 200);
            }
        }

        function clearAllImages() {
            if (images.length === 0) return;
            if (!confirm(t('confirmClear'))) return;

            images = [];
            imageList.innerHTML = '';
            updateStats();
            updateGenerateButton();
            showToast(t('toastCleared'), 'success');
        }

        function updateIndexNumbers() {
            const items = imageList.querySelectorAll('.image-item');
            items.forEach((item, index) => {
                item.querySelector('.image-index').textContent = index + 1;
            });
        }

        function updateStats() {
            imageCountEl.textContent = images.length;
            const totalBytes = images.reduce((sum, img) => sum + (img.file?.size || 0), 0);
            totalSizeEl.textContent = (totalBytes / 1024 / 1024).toFixed(2);
        }

        function updateGenerateButton() {
            generateBtn.disabled = images.length === 0;
        }

        // ===== ç”Ÿæˆ PDF =====
        async function generatePDF() {
            if (images.length === 0) {
                showToast(t('toastAddFirst'), 'error');
                return;
            }

            const pageSize = document.getElementById('pageSize').value;
            const orientation = document.getElementById('pageOrientation').value;
            const quality = parseFloat(document.getElementById('imageQuality').value);
            const margin = parseInt(document.getElementById('pageMargin').value) || 0;
            const fileName = document.getElementById('fileName').value.trim() || 'merged';

            generateBtn.disabled = true;
            generateBtn.innerHTML = t('generatingBtn');
            progressBar.classList.add('active');
            progressFill.style.width = '0%';

            try {
                const { jsPDF } = window.jspdf;
                let pdf = null;

                for (let i = 0; i < images.length; i++) {
                    const img = images[i];
                    const progress = ((i + 1) / images.length) * 100;
                    progressFill.style.width = `${progress}%`;

                    // åŠ è½½å›¾ç‰‡è·å–å°ºå¯¸
                    const imgEl = await loadImage(img.dataUrl);
                    const imgWidth = imgEl.width;
                    const imgHeight = imgEl.height;

                    // ç¡®å®šé¡µé¢æ–¹å‘
                    let pageOrientation = orientation;
                    if (orientation === 'auto') {
                        pageOrientation = imgWidth > imgHeight ? 'landscape' : 'portrait';
                    }

                    // ç¡®å®šé¡µé¢å°ºå¯¸
                    let pdfWidth, pdfHeight;
                    if (pageSize === 'fit') {
                        // è‡ªé€‚åº”ï¼šå°†åƒç´ è½¬æ¢ä¸ºæ¯«ç±³ (å‡è®¾ 96 DPI)
                        const pxToMm = 25.4 / 96;
                        pdfWidth = imgWidth * pxToMm + margin * 2;
                        pdfHeight = imgHeight * pxToMm + margin * 2;
                    } else {
                        // ä½¿ç”¨æ ‡å‡†å°ºå¯¸
                        const sizes = {
                            'a4': [210, 297],
                            'a3': [297, 420],
                            'a5': [148, 210],
                            'letter': [216, 279]
                        };
                        [pdfWidth, pdfHeight] = sizes[pageSize];
                        if (pageOrientation === 'landscape') {
                            [pdfWidth, pdfHeight] = [pdfHeight, pdfWidth];
                        }
                    }

                    // åˆ›å»ºæˆ–æ·»åŠ é¡µé¢
                    if (i === 0) {
                        pdf = new jsPDF({
                            orientation: pageOrientation,
                            unit: 'mm',
                            format: pageSize === 'fit' ? [pdfWidth, pdfHeight] : pageSize
                        });
                    } else {
                        pdf.addPage(pageSize === 'fit' ? [pdfWidth, pdfHeight] : pageSize, pageOrientation);
                    }

                    // è®¡ç®—å›¾ç‰‡åœ¨é¡µé¢ä¸­çš„ä½ç½®å’Œå°ºå¯¸
                    const pageW = pdf.internal.pageSize.getWidth();
                    const pageH = pdf.internal.pageSize.getHeight();
                    const availableW = pageW - margin * 2;
                    const availableH = pageH - margin * 2;

                    let drawWidth, drawHeight;
                    if (pageSize === 'fit') {
                        // è‡ªé€‚åº”æ¨¡å¼ï¼šå›¾ç‰‡å¡«æ»¡é¡µé¢
                        drawWidth = availableW;
                        drawHeight = availableH;
                    } else {
                        // æ ‡å‡†å°ºå¯¸ï¼šä¿æŒæ¯”ä¾‹å±…ä¸­
                        const ratio = Math.min(availableW / imgWidth, availableH / imgHeight);
                        drawWidth = imgWidth * ratio;
                        drawHeight = imgHeight * ratio;
                    }

                    const x = margin + (availableW - drawWidth) / 2;
                    const y = margin + (availableH - drawHeight) / 2;

                    // æ·»åŠ å›¾ç‰‡
                    const imgFormat = getImageFormat(img.file?.type || 'image/jpeg');
                    pdf.addImage(img.dataUrl, imgFormat, x, y, drawWidth, drawHeight, undefined, 'MEDIUM');

                    // è®© UI æœ‰æœºä¼šæ›´æ–°
                    await new Promise(r => setTimeout(r, 10));
                }

                // ä¸‹è½½ PDF
                pdf.save(`${fileName}.pdf`);
                showToast(t('toastSuccess'), 'success');

            } catch (err) {
                console.error('ç”Ÿæˆ PDF å¤±è´¥:', err);
                showToast(t('toastError') + err.message, 'error');
            } finally {
                generateBtn.disabled = false;
                generateBtn.innerHTML = 'ğŸ“„ <span data-i18n="generateBtn">' + t('generateBtn') + '</span>';
                progressBar.classList.remove('active');
            }
        }

        function loadImage(src) {
            return new Promise((resolve, reject) => {
                const img = new Image();
                img.onload = () => resolve(img);
                img.onerror = reject;
                img.src = src;
            });
        }

        function getImageFormat(mimeType) {
            const formats = {
                'image/jpeg': 'JPEG',
                'image/jpg': 'JPEG',
                'image/png': 'PNG',
                'image/webp': 'WEBP',
                'image/gif': 'GIF'
            };
            return formats[mimeType] || 'JPEG';
        }

        // ===== Toast æç¤º =====
        function showToast(message, type = '') {
            toast.textContent = message;
            toast.className = 'toast ' + type;
            toast.classList.add('show');
            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // ===== å¯åŠ¨ =====
        init();

        window._translations = i18n;
    })();
    </script>
    <script src="common/common.js" data-tool-id="image-to-pdf" data-tool-name="Image to PDF" data-category="pdf"></script>
    <script>WebToolbox.init(window._translations);</script>

    <!-- ===================== /LOGIC ===================== -->
</body>
</html>
